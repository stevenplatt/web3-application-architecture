(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PFloodsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PFloodsub=(()=>{var Of=Object.create;var ei=Object.defineProperty;var Vf=Object.getOwnPropertyDescriptor;var qf=Object.getOwnPropertyNames;var zf=Object.getPrototypeOf,Hf=Object.prototype.hasOwnProperty;var U=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wt=(e,t)=>{for(var r in t)ei(e,r,{get:t[r],enumerable:!0})},xa=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of qf(t))!Hf.call(e,i)&&i!==r&&ei(e,i,{get:()=>t[i],enumerable:!(n=Vf(t,i))||n.enumerable});return e};var M=(e,t,r)=>(r=e!=null?Of(zf(e)):{},xa(t||!e||!e.__esModule?ei(r,"default",{value:e,enumerable:!0}):r,e)),Gf=e=>xa(ei({},"__esModule",{value:!0}),e);var Oa=U((S1,Fa)=>{var kr=1e3,Dr=kr*60,Lr=Dr*60,sr=Lr*24,Xl=sr*7,Jl=sr*365.25;Fa.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return jl(e);if(r==="number"&&isFinite(e))return t.long?eh(e):th(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function jl(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Jl;case"weeks":case"week":case"w":return r*Xl;case"days":case"day":case"d":return r*sr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Lr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Dr;case"seconds":case"second":case"secs":case"sec":case"s":return r*kr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function th(e){var t=Math.abs(e);return t>=sr?Math.round(e/sr)+"d":t>=Lr?Math.round(e/Lr)+"h":t>=Dr?Math.round(e/Dr)+"m":t>=kr?Math.round(e/kr)+"s":e+"ms"}function eh(e){var t=Math.abs(e);return t>=sr?ii(e,t,sr,"day"):t>=Lr?ii(e,t,Lr,"hour"):t>=Dr?ii(e,t,Dr,"minute"):t>=kr?ii(e,t,kr,"second"):e+" ms"}function ii(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var qa=U((E1,Va)=>{function rh(e){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Oa(),r.destroy=c,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,h=null,y,p;function d(...x){if(!d.enabled)return;let v=d,w=Number(new Date),A=w-(l||w);v.diff=A,v.prev=l,v.curr=w,l=w,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let D=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(_,V)=>{if(_==="%%")return"%";D++;let q=r.formatters[V];if(typeof q=="function"){let bt=x[D];_=q.call(v,bt),x.splice(D,1),D--}return _}),r.formatArgs.call(v,x),(v.log||r.log).apply(v,x)}return d.namespace=f,d.useColors=r.useColors(),d.color=r.selectColor(f),d.extend=n,d.destroy=r.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(y!==r.namespaces&&(y=r.namespaces,p=r.enabled(f)),p),set:x=>{h=x}}),typeof r.init=="function"&&r.init(d),d}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),y=h.length;for(l=0;l<y;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Va.exports=rh});var za=U((Wt,si)=>{Wt.formatArgs=ih;Wt.save=sh;Wt.load=oh;Wt.useColors=nh;Wt.storage=ah();Wt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Wt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nh(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ih(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+si.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Wt.log=console.debug||console.log||(()=>{});function sh(e){try{e?Wt.storage.setItem("debug",e):Wt.storage.removeItem("debug")}catch{}}function oh(){let e;try{e=Wt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function ah(){try{return localStorage}catch{}}si.exports=qa()(Wt);var{formatters:uh}=si.exports;uh.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Nt=U((T1,Ga)=>{"use strict";function Ha(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function ch(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return Ha(e,r)}catch{r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),Ha(new i,r)}}Ga.exports=ch});var Ya=U((M1,Vs)=>{"use strict";var ph=Object.prototype.hasOwnProperty,Ut="~";function yn(){}Object.create&&(yn.prototype=Object.create(null),new yn().__proto__||(Ut=!1));function dh(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Qa(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new dh(r,n||e,i),o=Ut?Ut+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function ai(e,t){--e._eventsCount===0?e._events=new yn:delete e._events[t]}function kt(){this._events=new yn,this._eventsCount=0}kt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)ph.call(r,n)&&t.push(Ut?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};kt.prototype.listeners=function(t){var r=Ut?Ut+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};kt.prototype.listenerCount=function(t){var r=Ut?Ut+t:t,n=this._events[r];return n?n.fn?1:n.length:0};kt.prototype.emit=function(t,r,n,i,s,o){var a=Ut?Ut+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,f,l;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(l=1,f=new Array(c-1);l<c;l++)f[l-1]=arguments[l];u.fn.apply(u.context,f)}else{var h=u.length,y;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,r);break;case 3:u[l].fn.call(u[l].context,r,n);break;case 4:u[l].fn.call(u[l].context,r,n,i);break;default:if(!f)for(y=1,f=new Array(c-1);y<c;y++)f[y-1]=arguments[y];u[l].fn.apply(u[l].context,f)}}return!0};kt.prototype.on=function(t,r,n){return Qa(this,t,r,n,!1)};kt.prototype.once=function(t,r,n){return Qa(this,t,r,n,!0)};kt.prototype.removeListener=function(t,r,n,i){var s=Ut?Ut+t:t;if(!this._events[s])return this;if(!r)return ai(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&ai(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:ai(this,s)}return this};kt.prototype.removeAllListeners=function(t){var r;return t?(r=Ut?Ut+t:t,this._events[r]&&ai(this,r)):(this._events=new yn,this._eventsCount=0),this};kt.prototype.off=kt.prototype.removeListener;kt.prototype.addListener=kt.prototype.on;kt.prefixed=Ut;kt.EventEmitter=kt;typeof Vs<"u"&&(Vs.exports=kt)});var X=U((U2,y0)=>{y0.exports={options:{usePureJavaScript:!1}}});var x0=U((K2,m0)=>{var Xs={};m0.exports=Xs;var g0={};Xs.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Nh(e,t);else{var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};Xs.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=g0[t];if(!r){r=g0[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),o=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var u=0,c=a;u<o.length;++u)c+=o[u]*i,o[u]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var f=0;e[f]===s&&f<e.length-1;++f)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function Nh(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=t[s[r]];return u}});var yt=U((M2,S0)=>{var v0=X(),b0=x0(),g=S0.exports=v0.util=v0.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){g.nextTick=process.nextTick,typeof setImmediate=="function"?g.setImmediate=setImmediate:g.setImmediate=g.nextTick;return}if(typeof setImmediate=="function"){g.setImmediate=function(){return setImmediate.apply(void 0,arguments)},g.nextTick=function(a){return setImmediate(a)};return}if(g.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(u){if(u.source===window&&u.data===e){u.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(f){f()})}};var o=a,e="forge.setImmediate",t=[];g.setImmediate=function(u){t.push(u),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var u=t.slice();t.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=g.setImmediate;g.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(t.push(u),t.length===1&&i.setAttribute("a",n=!n))}}g.nextTick=g.setImmediate})();g.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;g.globalScope=function(){return g.isNodejs?globalThis:typeof self>"u"?window:self}();g.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};g.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};g.isArrayBufferView=function(e){return e&&g.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function _n(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}g.ByteBuffer=Js;function Js(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(g.isArrayBuffer(e)||g.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Js||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}g.ByteStringBuffer=Js;var kh=4096;g.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>kh&&(this.data.substr(0,1),this._constructedStringLength=0)};g.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};g.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};g.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};g.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};g.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};g.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(g.encodeUtf8(e))};g.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};g.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};g.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};g.ByteStringBuffer.prototype.putInt=function(e,t){_n(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};g.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};g.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};g.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};g.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};g.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};g.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};g.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};g.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};g.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};g.ByteStringBuffer.prototype.getInt=function(e){_n(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};g.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};g.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};g.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};g.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};g.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};g.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};g.ByteStringBuffer.prototype.copy=function(){var e=g.createBuffer(this.data);return e.read=this.read,e};g.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};g.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};g.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};g.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};g.ByteStringBuffer.prototype.toString=function(){return g.decodeUtf8(this.bytes())};function Dh(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=g.isArrayBuffer(e),n=g.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}g.DataBuffer=Dh;g.DataBuffer.prototype.length=function(){return this.write-this.read};g.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};g.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};g.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};g.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};g.DataBuffer.prototype.putBytes=function(e,t){if(g.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(g.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof g.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&g.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof g.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=g.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=g.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};g.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};g.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};g.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};g.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};g.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};g.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};g.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};g.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};g.DataBuffer.prototype.putInt=function(e,t){_n(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};g.DataBuffer.prototype.putSignedInt=function(e,t){return _n(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};g.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};g.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};g.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};g.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};g.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};g.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};g.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};g.DataBuffer.prototype.getInt=function(e){_n(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};g.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};g.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};g.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};g.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};g.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};g.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};g.DataBuffer.prototype.copy=function(){return new g.DataBuffer(this)};g.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};g.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};g.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};g.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};g.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return g.binary.raw.encode(t);if(e==="hex")return g.binary.hex.encode(t);if(e==="base64")return g.binary.base64.encode(t);if(e==="utf8")return g.text.utf8.decode(t);if(e==="utf16")return g.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};g.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=g.encodeUtf8(e)),new g.ByteBuffer(e)};g.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};g.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};g.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};g.bytesToHex=function(e){return g.createBuffer(e).toHex()};g.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Qe=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],w0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";g.encode64=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.length;)i=e.charCodeAt(a++),s=e.charCodeAt(a++),o=e.charCodeAt(a++),r+=We.charAt(i>>2),r+=We.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=We.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":We.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};g.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,o=0;o<e.length;)r=Qe[e.charCodeAt(o++)-43],n=Qe[e.charCodeAt(o++)-43],i=Qe[e.charCodeAt(o++)-43],s=Qe[e.charCodeAt(o++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};g.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};g.decodeUtf8=function(e){return decodeURIComponent(escape(e))};g.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:b0.encode,decode:b0.decode}};g.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};g.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};g.binary.hex.encode=g.bytesToHex;g.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};g.binary.base64.encode=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.byteLength;)i=e[a++],s=e[a++],o=e[a++],r+=We.charAt(i>>2),r+=We.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=We.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":We.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};g.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,u=0,c=r;u<e.length;)i=Qe[e.charCodeAt(u++)-43],s=Qe[e.charCodeAt(u++)-43],o=Qe[e.charCodeAt(u++)-43],a=Qe[e.charCodeAt(u++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return t?c-r:n.subarray(0,c)};g.binary.base58.encode=function(e,t){return g.binary.baseN.encode(e,w0,t)};g.binary.base58.decode=function(e,t){return g.binary.baseN.decode(e,w0,t)};g.text={utf8:{},utf16:{}};g.text.utf8.encode=function(e,t,r){e=g.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};g.text.utf8.decode=function(e){return g.decodeUtf8(String.fromCharCode.apply(null,e))};g.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n};g.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};g.deflate=function(e,t,r){if(t=g.decode64(e.deflate(g.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};g.inflate=function(e,t,r){var n=e.inflate(g.encode64(t)).rval;return n===null?null:g.decode64(n)};var js=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=g.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},to=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(g.decode64(r))),r},Lh=function(e,t,r,n){var i=to(e,t);i===null&&(i={}),i[r]=n,js(e,t,i)},Ph=function(e,t,r){var n=to(e,t);return n!==null&&(n=r in n?n[r]:null),n},Uh=function(e,t,r){var n=to(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),js(e,t,n)}},Kh=function(e,t){js(e,t,null)},bi=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(u){o=u}if(s)break}if(!s)throw o;return n};g.setItem=function(e,t,r,n,i){bi(Lh,arguments,i)};g.getItem=function(e,t,r,n){return bi(Ph,arguments,n)};g.removeItem=function(e,t,r,n){bi(Uh,arguments,n)};g.clearItems=function(e,t,r){bi(Kh,arguments,r)};g.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};g.format=function(e){for(var t=/%./g,r,n,i=0,s=[],o=0;r=t.exec(e);){n=e.substring(o,t.lastIndex-2),n.length>0&&s.push(n),o=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")};g.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+a:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};g.formatSize=function(e){return e>=1073741824?e=g.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=g.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=g.formatNumber(e/1024,0)+" KiB":e=g.formatNumber(e,0)+" bytes",e};g.bytesFromIP=function(e){return e.indexOf(".")!==-1?g.bytesFromIPv4(e):e.indexOf(":")!==-1?g.bytesFromIPv6(e):null};g.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=g.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};g.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=g.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=g.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};g.bytesToIP=function(e){return e.length===4?g.bytesToIPv4(e):e.length===16?g.bytesToIPv6(e):null};g.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};g.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=g.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};g.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in g&&!e.update)return t(null,g.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return g.cores=navigator.hardwareConcurrency,t(null,g.cores);if(typeof Worker>"u")return g.cores=1,t(null,g.cores);if(typeof Blob>"u")return g.cores=2,t(null,g.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),u=a+4;Date.now()<u;);self.postMessage({st:a,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,u){if(a===0){var c=Math.floor(o.reduce(function(f,l){return f+l},0)/o.length);return g.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,g.cores)}i(u,function(f,l){o.push(s(u,l)),n(o,a-1,u)})}function i(o,a){for(var u=[],c=[],f=0;f<o;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(c.push(h.data),c.length===o){for(var y=0;y<o;++y)u[y].terminate();a(null,c)}}),u.push(l)}for(var f=0;f<o;++f)u[f].postMessage(f)}function s(o,a){for(var u=[],c=0;c<o;++c)for(var f=a[c],l=u[c]=[],h=0;h<o;++h)if(c!==h){var y=a[h];(f.st>y.st&&f.st<y.et||y.st>f.st&&y.st<f.et)&&l.push(h)}return u.reduce(function(p,d){return Math.max(p,d.length)},0)}}});var ro=U((F2,E0)=>{var Bt=X();yt();E0.exports=Bt.cipher=Bt.cipher||{};Bt.cipher.algorithms=Bt.cipher.algorithms||{};Bt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Bt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Bt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Bt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Bt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Bt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Bt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Bt.cipher.algorithms[e]=t};Bt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Bt.cipher.algorithms?Bt.cipher.algorithms[e]:null};var eo=Bt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};eo.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Bt.util.createBuffer(),this.output=e.output||Bt.util.createBuffer(),this.mode.start(t)};eo.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};eo.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var io=U((O2,B0)=>{var At=X();yt();At.cipher=At.cipher||{};var O=B0.exports=At.cipher.modes=At.cipher.modes||{};O.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};O.ecb.prototype.start=function(e){};O.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};O.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};O.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};O.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};O.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};O.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=wi(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};O.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};O.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};O.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};O.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};O.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};O.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=wi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};O.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};O.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};O.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};O.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=wi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};O.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};O.ofb.prototype.decrypt=O.ofb.prototype.encrypt;O.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};O.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=wi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};O.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Si(this._inBlock)};O.ctr.prototype.decrypt=O.ctr.prototype.encrypt;O.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0,this._R=3774873600};O.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=At.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=At.util.createBuffer(e.additionalData):r=At.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=At.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(no(n*8)))}this._inBlock=this._j0.slice(0),Si(this._inBlock),this._partialBytes=0,r=At.util.createBuffer(r),this._aDataLength=no(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};O.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Si(this._inBlock)};O.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Si(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};O.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=At.util.createBuffer();var n=this._aDataLength.concat(no(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};O.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};O.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};O.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};O.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};O.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*t;a[u]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s};O.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function wi(e,t){if(typeof e=="string"&&(e=At.util.createBuffer(e)),At.util.isArray(e)&&e.length>4){var r=e;e=At.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!At.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function Si(e){e[e.length-1]=e[e.length-1]+1&4294967295}function no(e){return[e/4294967296|0,e&4294967295]}});var Bi=U((V2,I0)=>{var j=X();ro();io();yt();I0.exports=j.aes=j.aes||{};j.aes.startEncrypting=function(e,t,r,n){var i=Ei({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};j.aes.createEncryptionCipher=function(e,t){return Ei({key:e,output:null,decrypt:!1,mode:t})};j.aes.startDecrypting=function(e,t,r,n){var i=Ei({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};j.aes.createDecryptionCipher=function(e,t){return Ei({key:e,output:null,decrypt:!0,mode:t})};j.aes.Algorithm=function(e,t){ao||C0();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return oo(r._w,n,i,!1)},decrypt:function(n,i){return oo(r._w,n,i,!0)}}}),r._init=!1};j.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=j.util.createBuffer(t);else if(j.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=j.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!j.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!j.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=_0(t,e.decrypt&&!o),this._init=!0}};j.aes._expandKey=function(e,t){return ao||C0(),_0(e,t)};j.aes._updateBlock=oo;Fr("AES-ECB",j.cipher.modes.ecb);Fr("AES-CBC",j.cipher.modes.cbc);Fr("AES-CFB",j.cipher.modes.cfb);Fr("AES-OFB",j.cipher.modes.ofb);Fr("AES-CTR",j.cipher.modes.ctr);Fr("AES-GCM",j.cipher.modes.gcm);function Fr(e,t){var r=function(){return new j.aes.Algorithm(e,t)};j.cipher.registerAlgorithm(e,r)}var ao=!1,Mr=4,Kt,so,A0,fr,se;function C0(){ao=!0,A0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Kt=new Array(256),so=new Array(256),fr=new Array(4),se=new Array(4);for(var t=0;t<4;++t)fr[t]=new Array(256),se[t]=new Array(256);for(var r=0,n=0,i,s,o,a,u,c,f,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Kt[r]=a,so[a]=r,u=e[a],i=e[r],s=e[i],o=e[s],c=u<<24^a<<16^a<<8^(a^u),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var l=0;l<4;++l)fr[l][r]=c,se[l][a]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^e[e[e[i^o]]],n^=e[e[n]])}}function _0(e,t){for(var r=e.slice(0),n,i=1,s=r.length,o=s+6+1,a=Mr*o,u=s;u<a;++u)n=r[u-1],u%s===0?(n=Kt[n>>>16&255]<<24^Kt[n>>>8&255]<<16^Kt[n&255]<<8^Kt[n>>>24]^A0[i]<<24,i++):s>6&&u%s===4&&(n=Kt[n>>>24]<<24^Kt[n>>>16&255]<<16^Kt[n>>>8&255]<<8^Kt[n&255]),r[u]=r[u-s]^n;if(t){var c,f=se[0],l=se[1],h=se[2],y=se[3],p=r.slice(0);a=r.length;for(var u=0,d=a-Mr;u<a;u+=Mr,d-=Mr)if(u===0||u===a-Mr)p[u]=r[d],p[u+1]=r[d+3],p[u+2]=r[d+2],p[u+3]=r[d+1];else for(var x=0;x<Mr;++x)c=r[d+x],p[u+(3&-x)]=f[Kt[c>>>24]]^l[Kt[c>>>16&255]]^h[Kt[c>>>8&255]]^y[Kt[c&255]];r=p}return r}function oo(e,t,r,n){var i=e.length/4-1,s,o,a,u,c;n?(s=se[0],o=se[1],a=se[2],u=se[3],c=so):(s=fr[0],o=fr[1],a=fr[2],u=fr[3],c=Kt);var f,l,h,y,p,d,x;f=t[0]^e[0],l=t[n?3:1]^e[1],h=t[2]^e[2],y=t[n?1:3]^e[3];for(var v=3,w=1;w<i;++w)p=s[f>>>24]^o[l>>>16&255]^a[h>>>8&255]^u[y&255]^e[++v],d=s[l>>>24]^o[h>>>16&255]^a[y>>>8&255]^u[f&255]^e[++v],x=s[h>>>24]^o[y>>>16&255]^a[f>>>8&255]^u[l&255]^e[++v],y=s[y>>>24]^o[f>>>16&255]^a[l>>>8&255]^u[h&255]^e[++v],f=p,l=d,h=x;r[0]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[h>>>8&255]<<8^c[y&255]^e[++v],r[n?3:1]=c[l>>>24]<<24^c[h>>>16&255]<<16^c[y>>>8&255]<<8^c[f&255]^e[++v],r[2]=c[h>>>24]<<24^c[y>>>16&255]<<16^c[f>>>8&255]<<8^c[l&255]^e[++v],r[n?1:3]=c[y>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[h&255]^e[++v]}function Ei(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=j.cipher.createDecipher(r,e.key):n=j.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof j.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var R0=U((j2,T0)=>{"use strict";T0.exports=qh;function qh(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];a.apply(null,l)}};try{e.apply(t||null,r)}catch(c){s&&(s=!1,u(c))}})}});var L0=U(D0=>{"use strict";var Ai=D0;Ai.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var Or=new Array(64),k0=new Array(123);for(oe=0;oe<64;)k0[Or[oe]=oe<26?oe+65:oe<52?oe+71:oe<62?oe-4:oe-59|43]=oe++;var oe;Ai.encode=function(t,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var c=t[r++];switch(a){case 0:s[o++]=Or[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=Or[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=Or[u|c>>6],s[o++]=Or[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Or[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var N0="invalid encoding";Ai.decode=function(t,r,n){for(var i=n,s=0,o,a=0;a<t.length;){var u=t.charCodeAt(a++);if(u===61&&s>1)break;if((u=k0[u])===void 0)throw Error(N0);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(N0);return n-i};Ai.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var U0=U((em,P0)=>{"use strict";P0.exports=Ci;function Ci(){this._listeners={}}Ci.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};Ci.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Ci.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var z0=U((rm,q0)=>{"use strict";q0.exports=K0(K0);function K0(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){t[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],t[0]}function a(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],t[0]}e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}e.writeFloatLE=t.bind(null,M0),e.writeFloatBE=t.bind(null,F0);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}e.readFloatLE=r.bind(null,O0),e.readFloatBE=r.bind(null,V0)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){t[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],t[0]}function a(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],t[0]}e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((c<<31|f/4294967296)>>>0,a,u+s);else{var l=Math.floor(Math.log(o)/Math.LN2);l===1024&&(l=1023),f=o*Math.pow(2,-l),n(f*4503599627370496>>>0,a,u+i),n((c<<31|l+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}e.writeDoubleLE=t.bind(null,M0,0,4),e.writeDoubleBE=t.bind(null,F0,4,0);function r(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),f=(c>>31)*2+1,l=c>>>20&2047,h=4294967296*(c&1048575)+u;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}e.readDoubleLE=r.bind(null,O0,0,4),e.readDoubleBE=r.bind(null,V0,4,0)}(),e}function M0(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function F0(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function O0(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function V0(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var H0=U((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var W0=U(G0=>{"use strict";var uo=G0;uo.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};uo.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=t[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|t[r++]&63:u>239&&u<365?(u=((u&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(t[r++]&63)<<6|t[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};uo.write=function(t,r,n){for(var i=n,s,o,a=0;a<t.length;++a)s=t.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=t.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var Y0=U((im,Q0)=>{"use strict";Q0.exports=zh;function zh(e,t,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return e(u);o+u>n&&(s=e(n),o=0);var c=t.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var Z0=U((sm,$0)=>{"use strict";$0.exports=Ct;var In=hr();function Ct(e,t){this.lo=e>>>0,this.hi=t>>>0}var lr=Ct.zero=new Ct(0,0);lr.toNumber=function(){return 0};lr.zzEncode=lr.zzDecode=function(){return this};lr.length=function(){return 1};var Hh=Ct.zeroHash="\0\0\0\0\0\0\0\0";Ct.fromNumber=function(t){if(t===0)return lr;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ct(n,i)};Ct.from=function(t){if(typeof t=="number")return Ct.fromNumber(t);if(In.isString(t))if(In.Long)t=In.Long.fromString(t);else return Ct.fromNumber(parseInt(t,10));return t.low||t.high?new Ct(t.low>>>0,t.high>>>0):lr};Ct.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Ct.prototype.toLong=function(t){return In.Long?new In.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var Ye=String.prototype.charCodeAt;Ct.fromHash=function(t){return t===Hh?lr:new Ct((Ye.call(t,0)|Ye.call(t,1)<<8|Ye.call(t,2)<<16|Ye.call(t,3)<<24)>>>0,(Ye.call(t,4)|Ye.call(t,5)<<8|Ye.call(t,6)<<16|Ye.call(t,7)<<24)>>>0)};Ct.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ct.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};Ct.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};Ct.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var hr=U(co=>{"use strict";var k=co;k.asPromise=R0();k.base64=L0();k.EventEmitter=U0();k.float=z0();k.inquire=H0();k.utf8=W0();k.pool=Y0();k.LongBits=Z0();k.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);k.global=k.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||co;k.emptyArray=Object.freeze?Object.freeze([]):[];k.emptyObject=Object.freeze?Object.freeze({}):{};k.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};k.isString=function(t){return typeof t=="string"||t instanceof String};k.isObject=function(t){return t&&typeof t=="object"};k.isset=k.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};k.Buffer=function(){try{var e=k.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();k._Buffer_from=null;k._Buffer_allocUnsafe=null;k.newBuffer=function(t){return typeof t=="number"?k.Buffer?k._Buffer_allocUnsafe(t):new k.Array(t):k.Buffer?k._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};k.Array=typeof Uint8Array<"u"?Uint8Array:Array;k.Long=k.global.dcodeIO&&k.global.dcodeIO.Long||k.global.Long||k.inquire("long");k.key2Re=/^true|false|0|1$/;k.key32Re=/^-?(?:0|[1-9][0-9]*)$/;k.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;k.longToHash=function(t){return t?k.LongBits.from(t).toHash():k.LongBits.zeroHash};k.longFromHash=function(t,r){var n=k.LongBits.fromHash(t);return k.Long?k.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function X0(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}k.merge=X0;k.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function J0(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&X0(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}k.newError=J0;k.ProtocolError=J0("ProtocolError");k.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};k.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};k.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};k._configure=function(){var e=k.Buffer;if(!e){k._Buffer_from=k._Buffer_allocUnsafe=null;return}k._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},k._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var ho=U((am,nu)=>{"use strict";nu.exports=gt;var ye=hr(),lo,eu=ye.LongBits,Gh=ye.utf8;function ae(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function gt(e){this.buf=e,this.pos=0,this.len=e.length}var j0=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new gt(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new gt(t);throw Error("illegal buffer")},ru=function(){return ye.Buffer?function(r){return(gt.create=function(i){return ye.Buffer.isBuffer(i)?new lo(i):j0(i)})(r)}:j0};gt.create=ru();gt.prototype._slice=ye.Array.prototype.subarray||ye.Array.prototype.slice;gt.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,ae(this,10);return t}}();gt.prototype.int32=function(){return this.uint32()|0};gt.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function fo(){var e=new eu(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw ae(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw ae(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}gt.prototype.bool=function(){return this.uint32()!==0};function _i(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}gt.prototype.fixed32=function(){if(this.pos+4>this.len)throw ae(this,4);return _i(this.buf,this.pos+=4)};gt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ae(this,4);return _i(this.buf,this.pos+=4)|0};function tu(){if(this.pos+8>this.len)throw ae(this,8);return new eu(_i(this.buf,this.pos+=4),_i(this.buf,this.pos+=4))}gt.prototype.float=function(){if(this.pos+4>this.len)throw ae(this,4);var t=ye.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};gt.prototype.double=function(){if(this.pos+8>this.len)throw ae(this,4);var t=ye.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};gt.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw ae(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};gt.prototype.string=function(){var t=this.bytes();return Gh.read(t,0,t.length)};gt.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw ae(this,t);this.pos+=t}else do if(this.pos>=this.len)throw ae(this);while(this.buf[this.pos++]&128);return this};gt.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};gt._configure=function(e){lo=e,gt.create=ru(),lo._configure();var t=ye.Long?"toLong":"toNumber";ye.merge(gt.prototype,{int64:function(){return fo.call(this)[t](!1)},uint64:function(){return fo.call(this)[t](!0)},sint64:function(){return fo.call(this).zzDecode()[t](!1)},fixed64:function(){return tu.call(this)[t](!0)},sfixed64:function(){return tu.call(this)[t](!1)}})}});var au=U((um,ou)=>{"use strict";ou.exports=pr;var su=ho();(pr.prototype=Object.create(su.prototype)).constructor=pr;var iu=hr();function pr(e){su.call(this,e)}pr._configure=function(){iu.Buffer&&(pr.prototype._slice=iu.Buffer.prototype.slice)};pr.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};pr._configure()});var bo=U((cm,lu)=>{"use strict";lu.exports=Q;var jt=hr(),po,Ii=jt.LongBits,uu=jt.base64,cu=jt.utf8;function Tn(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function go(){}function Wh(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Q(){this.len=0,this.head=new Tn(go,0,0),this.tail=this.head,this.states=null}var fu=function(){return jt.Buffer?function(){return(Q.create=function(){return new po})()}:function(){return new Q}};Q.create=fu();Q.alloc=function(t){return new jt.Array(t)};jt.Array!==Array&&(Q.alloc=jt.pool(Q.alloc,jt.Array.prototype.subarray));Q.prototype._push=function(t,r,n){return this.tail=this.tail.next=new Tn(t,r,n),this.len+=r,this};function mo(e,t,r){t[r]=e&255}function Qh(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function xo(e,t){this.len=e,this.next=void 0,this.val=t}xo.prototype=Object.create(Tn.prototype);xo.prototype.fn=Qh;Q.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new xo((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Q.prototype.int32=function(t){return t<0?this._push(vo,10,Ii.fromNumber(t)):this.uint32(t)};Q.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function vo(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}Q.prototype.uint64=function(t){var r=Ii.from(t);return this._push(vo,r.length(),r)};Q.prototype.int64=Q.prototype.uint64;Q.prototype.sint64=function(t){var r=Ii.from(t).zzEncode();return this._push(vo,r.length(),r)};Q.prototype.bool=function(t){return this._push(mo,1,t?1:0)};function yo(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Q.prototype.fixed32=function(t){return this._push(yo,4,t>>>0)};Q.prototype.sfixed32=Q.prototype.fixed32;Q.prototype.fixed64=function(t){var r=Ii.from(t);return this._push(yo,4,r.lo)._push(yo,4,r.hi)};Q.prototype.sfixed64=Q.prototype.fixed64;Q.prototype.float=function(t){return this._push(jt.float.writeFloatLE,4,t)};Q.prototype.double=function(t){return this._push(jt.float.writeDoubleLE,8,t)};var Yh=jt.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};Q.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(mo,1,0);if(jt.isString(t)){var n=Q.alloc(r=uu.length(t));uu.decode(t,n,0),t=n}return this.uint32(r)._push(Yh,r,t)};Q.prototype.string=function(t){var r=cu.length(t);return r?this.uint32(r)._push(cu.write,r,t):this._push(mo,1,0)};Q.prototype.fork=function(){return this.states=new Wh(this),this.head=this.tail=new Tn(go,0,0),this.len=0,this};Q.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Tn(go,0,0),this.len=0),this};Q.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};Q.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};Q._configure=function(e){po=e,Q.create=fu(),po._configure()}});var du=U((fm,pu)=>{"use strict";pu.exports=ge;var hu=bo();(ge.prototype=Object.create(hu.prototype)).constructor=ge;var $e=hr();function ge(){hu.call(this)}ge._configure=function(){ge.alloc=$e._Buffer_allocUnsafe,ge.writeBytesBuffer=$e.Buffer&&$e.Buffer.prototype instanceof Uint8Array&&$e.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};ge.prototype.bytes=function(t){$e.isString(t)&&(t=$e._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(ge.writeBytesBuffer,r,t),this};function $h(e,t,r){e.length<40?$e.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}ge.prototype.string=function(t){var r=$e.Buffer.byteLength(t);return this.uint32(r),r&&this._push($h,r,t),this};ge._configure()});var Ri=U((Im,vu)=>{var Rn=X();Rn.pki=Rn.pki||{};var _o=vu.exports=Rn.pki.oids=Rn.oids=Rn.oids||{};function B(e,t){_o[e]=t,_o[t]=e}function Z(e,t){_o[e]=t}B("1.2.840.113549.1.1.1","rsaEncryption");B("1.2.840.113549.1.1.4","md5WithRSAEncryption");B("1.2.840.113549.1.1.5","sha1WithRSAEncryption");B("1.2.840.113549.1.1.7","RSAES-OAEP");B("1.2.840.113549.1.1.8","mgf1");B("1.2.840.113549.1.1.9","pSpecified");B("1.2.840.113549.1.1.10","RSASSA-PSS");B("1.2.840.113549.1.1.11","sha256WithRSAEncryption");B("1.2.840.113549.1.1.12","sha384WithRSAEncryption");B("1.2.840.113549.1.1.13","sha512WithRSAEncryption");B("1.3.101.112","EdDSA25519");B("1.2.840.10040.4.3","dsa-with-sha1");B("1.3.14.3.2.7","desCBC");B("1.3.14.3.2.26","sha1");B("1.3.14.3.2.29","sha1WithRSASignature");B("2.16.840.1.101.3.4.2.1","sha256");B("2.16.840.1.101.3.4.2.2","sha384");B("2.16.840.1.101.3.4.2.3","sha512");B("2.16.840.1.101.3.4.2.4","sha224");B("2.16.840.1.101.3.4.2.5","sha512-224");B("2.16.840.1.101.3.4.2.6","sha512-256");B("1.2.840.113549.2.2","md2");B("1.2.840.113549.2.5","md5");B("1.2.840.113549.1.7.1","data");B("1.2.840.113549.1.7.2","signedData");B("1.2.840.113549.1.7.3","envelopedData");B("1.2.840.113549.1.7.4","signedAndEnvelopedData");B("1.2.840.113549.1.7.5","digestedData");B("1.2.840.113549.1.7.6","encryptedData");B("1.2.840.113549.1.9.1","emailAddress");B("1.2.840.113549.1.9.2","unstructuredName");B("1.2.840.113549.1.9.3","contentType");B("1.2.840.113549.1.9.4","messageDigest");B("1.2.840.113549.1.9.5","signingTime");B("1.2.840.113549.1.9.6","counterSignature");B("1.2.840.113549.1.9.7","challengePassword");B("1.2.840.113549.1.9.8","unstructuredAddress");B("1.2.840.113549.1.9.14","extensionRequest");B("1.2.840.113549.1.9.20","friendlyName");B("1.2.840.113549.1.9.21","localKeyId");B("1.2.840.113549.1.9.22.1","x509Certificate");B("1.2.840.113549.1.12.10.1.1","keyBag");B("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");B("1.2.840.113549.1.12.10.1.3","certBag");B("1.2.840.113549.1.12.10.1.4","crlBag");B("1.2.840.113549.1.12.10.1.5","secretBag");B("1.2.840.113549.1.12.10.1.6","safeContentsBag");B("1.2.840.113549.1.5.13","pkcs5PBES2");B("1.2.840.113549.1.5.12","pkcs5PBKDF2");B("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");B("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");B("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");B("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");B("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");B("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");B("1.2.840.113549.2.7","hmacWithSHA1");B("1.2.840.113549.2.8","hmacWithSHA224");B("1.2.840.113549.2.9","hmacWithSHA256");B("1.2.840.113549.2.10","hmacWithSHA384");B("1.2.840.113549.2.11","hmacWithSHA512");B("1.2.840.113549.3.7","des-EDE3-CBC");B("2.16.840.1.101.3.4.1.2","aes128-CBC");B("2.16.840.1.101.3.4.1.22","aes192-CBC");B("2.16.840.1.101.3.4.1.42","aes256-CBC");B("2.5.4.3","commonName");B("2.5.4.4","surname");B("2.5.4.5","serialNumber");B("2.5.4.6","countryName");B("2.5.4.7","localityName");B("2.5.4.8","stateOrProvinceName");B("2.5.4.9","streetAddress");B("2.5.4.10","organizationName");B("2.5.4.11","organizationalUnitName");B("2.5.4.12","title");B("2.5.4.13","description");B("2.5.4.15","businessCategory");B("2.5.4.17","postalCode");B("2.5.4.42","givenName");B("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");B("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");B("2.16.840.1.113730.1.1","nsCertType");B("2.16.840.1.113730.1.13","nsComment");Z("2.5.29.1","authorityKeyIdentifier");Z("2.5.29.2","keyAttributes");Z("2.5.29.3","certificatePolicies");Z("2.5.29.4","keyUsageRestriction");Z("2.5.29.5","policyMapping");Z("2.5.29.6","subtreesConstraint");Z("2.5.29.7","subjectAltName");Z("2.5.29.8","issuerAltName");Z("2.5.29.9","subjectDirectoryAttributes");Z("2.5.29.10","basicConstraints");Z("2.5.29.11","nameConstraints");Z("2.5.29.12","policyConstraints");Z("2.5.29.13","basicConstraints");B("2.5.29.14","subjectKeyIdentifier");B("2.5.29.15","keyUsage");Z("2.5.29.16","privateKeyUsagePeriod");B("2.5.29.17","subjectAltName");B("2.5.29.18","issuerAltName");B("2.5.29.19","basicConstraints");Z("2.5.29.20","cRLNumber");Z("2.5.29.21","cRLReason");Z("2.5.29.22","expirationDate");Z("2.5.29.23","instructionCode");Z("2.5.29.24","invalidityDate");Z("2.5.29.25","cRLDistributionPoints");Z("2.5.29.26","issuingDistributionPoint");Z("2.5.29.27","deltaCRLIndicator");Z("2.5.29.28","issuingDistributionPoint");Z("2.5.29.29","certificateIssuer");Z("2.5.29.30","nameConstraints");B("2.5.29.31","cRLDistributionPoints");B("2.5.29.32","certificatePolicies");Z("2.5.29.33","policyMappings");Z("2.5.29.34","policyConstraints");B("2.5.29.35","authorityKeyIdentifier");Z("2.5.29.36","policyConstraints");B("2.5.29.37","extKeyUsage");Z("2.5.29.46","freshestCRL");Z("2.5.29.54","inhibitAnyPolicy");B("1.3.6.1.4.1.11129.2.4.2","timestampList");B("1.3.6.1.5.5.7.1.1","authorityInfoAccess");B("1.3.6.1.5.5.7.3.1","serverAuth");B("1.3.6.1.5.5.7.3.2","clientAuth");B("1.3.6.1.5.5.7.3.3","codeSigning");B("1.3.6.1.5.5.7.3.4","emailProtection");B("1.3.6.1.5.5.7.3.8","timeStamping")});var kn=U((Tm,wu)=>{var et=X();yt();Ri();var C=wu.exports=et.asn1=et.asn1||{};C.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};C.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};C.create=function(e,t,r,n,i){if(et.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||et.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=C.copy(a)),a};C.copy=function(e,t){var r;if(et.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(C.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:C.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};C.equals=function(e,t,r){if(et.util.isArray(e)){if(!et.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!C.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&C.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};C.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Nn(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var jh=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;Nn(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};C.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=et.util.createBuffer(e));var r=e.length(),n=Ni(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Ni(e,t,r,n){var i;Nn(e,t,2);var s=e.getByte();t--;var o=s&192,a=s&31;i=e.length();var u=jh(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=u,c}u=t}var f,l,h=(s&32)===32;if(h)if(f=[],u===void 0)for(;;){if(Nn(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),f.push(Ni(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),f.push(Ni(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(f===void 0&&o===C.Class.UNIVERSAL&&a===C.Type.BITSTRING&&(l=e.bytes(u)),f===void 0&&n.decodeBitStrings&&o===C.Class.UNIVERSAL&&a===C.Type.BITSTRING&&u>1){var y=e.read,p=t,d=0;if(a===C.Type.BITSTRING&&(Nn(e,t,1),d=e.getByte(),t--),d===0)try{i=e.length();var x={strict:!0,decodeBitStrings:!0},v=Ni(e,t,r+1,x),w=i-e.length();t-=w,a==C.Type.BITSTRING&&w++;var A=v.tagClass;w===u&&(A===C.Class.UNIVERSAL||A===C.Class.CONTEXT_SPECIFIC)&&(f=[v])}catch{}f===void 0&&(e.read=y,t=p)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(a===C.Type.BMPSTRING)for(f="";u>0;u-=2)Nn(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(u),t-=u}var D=l===void 0?null:{bitStringContents:l};return C.create(o,a,h,f,D)}C.toDer=function(e){var t=et.util.createBuffer(),r=e.tagClass|e.type,n=et.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=C.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(C.toDer(e.value[s]))}else if(e.type===C.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===C.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t};C.oidToDer=function(e){var t=e.split("."),r=et.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,o,a=2;a<t.length;++a){n=!0,i=[],s=parseInt(t[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};C.derToOid=function(e){var t;typeof e=="string"&&(e=et.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};C.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var u=e.charAt(10),c=10;u!=="+"&&u!=="-"&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),c&&(u=e.charAt(c),u==="+"||u==="-")){var f=parseInt(e.substr(c+1,2),10),l=parseInt(e.substr(c+4,2),10),h=f*60+l;h*=6e4,u==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};C.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),u=0,c=0,f=!1;e.charAt(e.length-1)==="Z"&&(f=!0);var l=e.length-5,h=e.charAt(l);if(h==="+"||h==="-"){var y=parseInt(e.substr(l+1,2),10),p=parseInt(e.substr(l+4,2),10);c=y*60+p,c*=6e4,h==="+"&&(c*=-1),f=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(s,o,a,u)),t};C.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};C.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};C.integerToDer=function(e){var t=et.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};C.derToInteger=function(e){typeof e=="string"&&(e=et.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};C.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&et.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&(i=C.validate(e.value[s],t.value[o],r,n),i?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var u=e.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var bu=/[^\\u0000-\\u00ff]/;C.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case C.Class.UNIVERSAL:n+="Universal:";break;case C.Class.APPLICATION:n+="Application:";break;case C.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case C.Class.PRIVATE:n+="Private:";break}if(e.tagClass===C.Class.UNIVERSAL)switch(n+=e.type,e.type){case C.Type.NONE:n+=" (None)";break;case C.Type.BOOLEAN:n+=" (Boolean)";break;case C.Type.INTEGER:n+=" (Integer)";break;case C.Type.BITSTRING:n+=" (Bit string)";break;case C.Type.OCTETSTRING:n+=" (Octet string)";break;case C.Type.NULL:n+=" (Null)";break;case C.Type.OID:n+=" (Object Identifier)";break;case C.Type.ODESC:n+=" (Object Descriptor)";break;case C.Type.EXTERNAL:n+=" (External or Instance of)";break;case C.Type.REAL:n+=" (Real)";break;case C.Type.ENUMERATED:n+=" (Enumerated)";break;case C.Type.EMBEDDED:n+=" (Embedded PDV)";break;case C.Type.UTF8:n+=" (UTF8)";break;case C.Type.ROID:n+=" (Relative Object Identifier)";break;case C.Type.SEQUENCE:n+=" (Sequence)";break;case C.Type.SET:n+=" (Set)";break;case C.Type.PRINTABLESTRING:n+=" (Printable String)";break;case C.Type.IA5String:n+=" (IA5String (ASCII))";break;case C.Type.UTCTIME:n+=" (UTC time)";break;case C.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case C.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,a="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=C.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===C.Type.OID){var u=C.derToOid(e.value);n+=u,et.pki&&et.pki.oids&&u in et.pki.oids&&(n+=" ("+et.pki.oids[u]+") ")}if(e.type===C.Type.INTEGER)try{n+=C.derToInteger(e.value)}catch{n+="0x"+et.util.bytesToHex(e.value)}else if(e.type===C.Type.BITSTRING){if(e.value.length>1?n+="0x"+et.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===C.Type.OCTETSTRING)bu.test(e.value)||(n+="("+e.value+") "),n+="0x"+et.util.bytesToHex(e.value);else if(e.type===C.Type.UTF8)try{n+=et.util.decodeUtf8(e.value)}catch(f){if(f.message==="URI malformed")n+="0x"+et.util.bytesToHex(e.value)+" (malformed UTF8)";else throw f}else e.type===C.Type.PRINTABLESTRING||e.type===C.Type.IA5String?n+=e.value:bu.test(e.value)?n+="0x"+et.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Bu=U((Rm,Eu)=>{var st=X();ro();io();yt();Eu.exports=st.des=st.des||{};st.des.startEncrypting=function(e,t,r,n){var i=ki({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};st.des.createEncryptionCipher=function(e,t){return ki({key:e,output:null,decrypt:!1,mode:t})};st.des.startDecrypting=function(e,t,r,n){var i=ki({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};st.des.createDecryptionCipher=function(e,t){return ki({key:e,output:null,decrypt:!0,mode:t})};st.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return Su(r._keys,n,i,!1)},decrypt:function(n,i){return Su(r._keys,n,i,!0)}}}),r._init=!1};st.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=st.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=up(t),this._init=!0}};me("DES-ECB",st.cipher.modes.ecb);me("DES-CBC",st.cipher.modes.cbc);me("DES-CFB",st.cipher.modes.cfb);me("DES-OFB",st.cipher.modes.ofb);me("DES-CTR",st.cipher.modes.ctr);me("3DES-ECB",st.cipher.modes.ecb);me("3DES-CBC",st.cipher.modes.cbc);me("3DES-CFB",st.cipher.modes.cfb);me("3DES-OFB",st.cipher.modes.ofb);me("3DES-CTR",st.cipher.modes.ctr);function me(e,t){var r=function(){return new st.des.Algorithm(e,t)};st.cipher.registerAlgorithm(e,r)}var tp=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ep=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],rp=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],np=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ip=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],sp=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],op=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ap=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function up(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],d=e.length()>8?3:1,x=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,A,D=0;D<d;D++){var I=e.getInt32(),_=e.getInt32();A=(I>>>4^_)&252645135,_^=A,I^=A<<4,A=(_>>>-16^I)&65535,I^=A,_^=A<<-16,A=(I>>>2^_)&858993459,_^=A,I^=A<<2,A=(_>>>-16^I)&65535,I^=A,_^=A<<-16,A=(I>>>1^_)&1431655765,_^=A,I^=A<<1,A=(_>>>8^I)&16711935,I^=A,_^=A<<8,A=(I>>>1^_)&1431655765,_^=A,I^=A<<1,A=I<<8|_>>>20&240,I=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=A;for(var V=0;V<v.length;++V){v[V]?(I=I<<2|I>>>26,_=_<<2|_>>>26):(I=I<<1|I>>>27,_=_<<1|_>>>27),I&=-15,_&=-15;var q=t[I>>>28]|r[I>>>24&15]|n[I>>>20&15]|i[I>>>16&15]|s[I>>>12&15]|o[I>>>8&15]|a[I>>>4&15],bt=u[_>>>28]|c[_>>>24&15]|f[_>>>20&15]|l[_>>>16&15]|h[_>>>12&15]|y[_>>>8&15]|p[_>>>4&15];A=(bt>>>16^q)&65535,x[w++]=q^A,x[w++]=bt^A<<16}}return x}function Su(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=t[0],u=t[1];o=(a>>>4^u)&252645135,u^=o,a^=o<<4,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,a=a<<1|a>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=s[c+1],l=s[c+2],h=s[c];h!=f;h+=l){var y=u^e[h],p=(u>>>4|u<<28)^e[h+1];o=a,a=u,u=o^(ep[y>>>24&63]|np[y>>>16&63]|sp[y>>>8&63]|ap[y&63]|tp[p>>>24&63]|rp[p>>>16&63]|ip[p>>>8&63]|op[p&63])}o=a,a=u,u=o}a=a>>>1|a<<31,u=u>>>1|u<<31,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(a>>>4^u)&252645135,u^=o,a^=o<<4,r[0]=a,r[1]=u}function ki(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=st.cipher.createDecipher(r,e.key):n=st.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof st.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var dr=U((Nm,Au)=>{var Di=X();Au.exports=Di.md=Di.md||{};Di.md.algorithms=Di.md.algorithms||{}});var _u=U((km,Cu)=>{var ke=X();dr();yt();var cp=Cu.exports=ke.hmac=ke.hmac||{};cp.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in ke.md.algorithms)t=ke.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(o===null)o=e;else{if(typeof o=="string")o=ke.util.createBuffer(o);else if(ke.util.isArray(o)){var a=o;o=ke.util.createBuffer();for(var u=0;u<a.length;++u)o.putByte(a[u])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=ke.util.createBuffer(),n=ke.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var a=o.at(u);r.putByte(54^a),n.putByte(92^a)}if(c<t.blockLength)for(var a=t.blockLength-c,u=0;u<a;++u)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i}});var zr=U(()=>{});var Io=U((Pm,Iu)=>{var Mt=X();_u();dr();yt();var fp=Mt.pkcs5=Mt.pkcs5||{},De;Mt.util.isNodejs&&!Mt.options.usePureJavaScript&&(De=zr());Iu.exports=Mt.pbkdf2=fp.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Mt.util.isNodejs&&!Mt.options.usePureJavaScript&&De.pbkdf2&&(i===null||typeof i!="object")&&(De.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?De.pbkdf2Sync.length===4?De.pbkdf2(e,t,r,n,function(A,D){if(A)return s(A);s(null,D.toString("binary"))}):De.pbkdf2(e,t,r,n,i,function(A,D){if(A)return s(A);s(null,D.toString("binary"))}):De.pbkdf2Sync.length===4?De.pbkdf2Sync(e,t,r,n).toString("binary"):De.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Mt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Mt.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var u=Math.ceil(n/o),c=n-(u-1)*o,f=Mt.hmac.create();f.start(i,e);var l="",h,y,p;if(!s){for(var d=1;d<=u;++d){f.start(null,null),f.update(t),f.update(Mt.util.int32ToBytes(d)),h=p=f.digest().getBytes();for(var x=2;x<=r;++x)f.start(null,null),f.update(p),y=f.digest().getBytes(),h=Mt.util.xorBytes(h,y,o),p=y;l+=d<u?h:h.substr(0,c)}return l}var d=1,x;function v(){if(d>u)return s(null,l);f.start(null,null),f.update(t),f.update(Mt.util.int32ToBytes(d)),h=p=f.digest().getBytes(),x=2,w()}function w(){if(x<=r)return f.start(null,null),f.update(p),y=f.digest().getBytes(),h=Mt.util.xorBytes(h,y,o),p=y,++x,Mt.util.setImmediate(w);l+=d<u?h:h.substr(0,c),++d,v()}v()}});var Nu=U((Um,Ru)=>{var Pi=X();yt();var Tu=Ru.exports=Pi.pem=Pi.pem||{};Tu.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=Li(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=Li(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=Li(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=Li(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Pi.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};Tu.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Pi.util.decode64(s[3])};if(t.push(a),!!s[2]){for(var u=s[2].split(i),c=0;s&&c<u.length;){for(var f=u[c].replace(/\s+$/,""),l=c+1;l<u.length;++l){var h=u[l];if(!/\s/.test(h[0]))break;f+=h,c=l}if(s=f.match(n),s){for(var y={name:s[1],values:[]},p=s[2].split(","),d=0;d<p.length;++d)y.values.push(lp(p[d]));if(a.procType)if(!a.contentDomain&&y.name==="Content-Domain")a.contentDomain=p[0]||"";else if(!a.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:p[0],parameters:p[1]||null}}else a.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:p[0],type:p[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Li(e){for(var t=e.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(o=i);return t}function lp(e){return e.replace(/^\s+/,"")}});var Ku=U((Km,Uu)=>{var xe=X();dr();yt();var Du=Uu.exports=xe.sha256=xe.sha256||{};xe.md.sha256=xe.md.algorithms.sha256=Du;Du.create=function(){Lu||hp();var e=null,t=xe.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=xe.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=xe.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),ku(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=xe.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(To.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};ku(l,r,i);var h=xe.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var To=null,Lu=!1,Pu=null;function hp(){To=String.fromCharCode(128),To+=xe.util.fillString(String.fromCharCode(0),64),Pu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Lu=!0}function ku(e,t,r){for(var n,i,s,o,a,u,c,f,l,h,y,p,d,x,v,w=r.length();w>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(f=e.h0,l=e.h1,h=e.h2,y=e.h3,p=e.h4,d=e.h5,x=e.h6,v=e.h7,c=0;c<64;++c)o=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),a=x^p&(d^x),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&l|h&(f^l),n=v+o+a+Pu[c]+t[c],i=s+u,v=x,x=d,d=p,p=y+n>>>0,y=h,h=l,l=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+y|0,e.h4=e.h4+p|0,e.h5=e.h5+d|0,e.h6=e.h6+x|0,e.h7=e.h7+v|0,w-=64}}});var Fu=U((Mm,Mu)=>{var ve=X();yt();var Ui=null;ve.util.isNodejs&&!ve.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ui=zr());var pp=Mu.exports=ve.prng=ve.prng||{};pp.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,f){if(!f)return t.generateSync(c);var l=t.plugin.cipher,h=t.plugin.increment,y=t.plugin.formatKey,p=t.plugin.formatSeed,d=ve.util.createBuffer();t.key=null,x();function x(v){if(v)return f(v);if(d.length()>=c)return f(null,d.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return ve.util.nextTick(function(){s(x)});var w=l(t.key,t.seed);t.generated+=w.length,d.putBytes(w),t.key=y(l(t.key,h(t.seed))),t.seed=p(l(t.key,t.seed)),ve.util.setImmediate(x)}},t.generateSync=function(c){var f=t.plugin.cipher,l=t.plugin.increment,h=t.plugin.formatKey,y=t.plugin.formatSeed;t.key=null;for(var p=ve.util.createBuffer();p.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&o();var d=f(t.key,t.seed);t.generated+=d.length,p.putBytes(d),t.key=h(f(t.key,l(t.seed))),t.seed=y(f(t.key,t.seed))}return p.getBytes(c)};function s(c){if(t.pools[0].messageLength>=32)return a(),c();var f=32-t.pools[0].messageLength<<5;t.seedFile(f,function(l,h){if(l)return c(l);t.collect(h),a(),c()})}function o(){if(t.pools[0].messageLength>=32)return a();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var f=1,l=0;l<32;++l)t.reseeds%f===0&&(c.update(t.pools[l].digest().getBytes()),t.pools[l].start()),f=f<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var h=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function u(c){var f=null,l=ve.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(I){return h.getRandomValues(I)});var y=ve.util.createBuffer();if(f)for(;y.length()<c;){var p=Math.max(1,Math.min(c-y.length(),65536)/4),d=new Uint32Array(Math.floor(p));try{f(d);for(var x=0;x<d.length;++x)y.putInt32(d[x])}catch(I){if(!(typeof QuotaExceededError<"u"&&I instanceof QuotaExceededError))throw I}}if(y.length()<c)for(var v,w,A,D=Math.floor(Math.random()*65536);y.length()<c;){w=16807*(D&65535),v=16807*(D>>16),w+=(v&32767)<<16,w+=v>>15,w=(w&2147483647)+(w>>31),D=w&4294967295;for(var x=0;x<3;++x)A=D>>>(x<<3),A^=Math.floor(Math.random()*256),y.putByte(A&255)}return y.getBytes(c)}return Ui?(t.seedFile=function(c,f){Ui.randomBytes(c,function(l,h){if(l)return f(l);f(null,h.toString())})},t.seedFileSync=function(c){return Ui.randomBytes(c).toString()}):(t.seedFile=function(c,f){try{f(null,u(c))}catch(l){f(l)}},t.seedFileSync=u),t.collect=function(c){for(var f=c.length,l=0;l<f;++l)t.pools[t.pool].update(c.substr(l,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(c>>h&255);t.collect(l)},t.registerWorker=function(c){if(c===self)t.seedFile=function(l,h){function y(p){var d=p.data;d.forge&&d.forge.prng&&(self.removeEventListener("message",y),h(d.forge.prng.err,d.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(y,p){c.postMessage({forge:{prng:{err:y,bytes:p}}})})};c.addEventListener("message",f)}},t}});var Dn=U((Fm,Ro)=>{var _t=X();Bi();Ku();Fu();yt();(function(){if(_t.random&&_t.random.getBytes){Ro.exports=_t.random;return}(function(e){var t={},r=new Array(4),n=_t.util.createBuffer();t.formatKey=function(l){var h=_t.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),_t.aes._expandKey(l,!1)},t.formatSeed=function(l){var h=_t.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},t.cipher=function(l,h){return _t.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(l){return++l[3],l},t.md=_t.md.sha256;function i(){var l=_t.prng.create(t);return l.getBytes=function(h,y){return l.generate(h,y)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),o=null,a=_t.util.globalScope,u=a.crypto||a.msCrypto;if(u&&u.getRandomValues&&(o=function(l){return u.getRandomValues(l)}),_t.options.usePureJavaScript||!_t.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch{}s.collect(c),c=null}e&&(e().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),e().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!_t.random)_t.random=s;else for(var f in s)_t.random[f]=s[f];_t.random.createInstance=i,Ro.exports=_t.random})(typeof jQuery<"u"?jQuery:null)})()});var zu=U((Om,qu)=>{var zt=X();yt();var No=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Ou=[1,2,3,5],dp=function(e,t){return e<<t&65535|(e&65535)>>16-t},yp=function(e,t){return(e&65535)>>t|e<<16-t&65535};qu.exports=zt.rc2=zt.rc2||{};zt.rc2.expandKey=function(e,t){typeof e=="string"&&(e=zt.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(No[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,No[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,No[r.at(a+1)^r.at(a+s)]);return r};var Vu=function(e,t,r){var n=!1,i=null,s=null,o=null,a,u,c,f,l=[];for(e=zt.rc2.expandKey(e,t),c=0;c<64;c++)l.push(e.getInt16Le());r?(a=function(p){for(c=0;c<4;c++)p[c]+=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),p[c]=dp(p[c],Ou[c]),f++},u=function(p){for(c=0;c<4;c++)p[c]+=l[p[(c+3)%4]&63]}):(a=function(p){for(c=3;c>=0;c--)p[c]=yp(p[c],Ou[c]),p[c]-=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),f--},u=function(p){for(c=3;c>=0;c--)p[c]-=l[p[(c+3)%4]&63]});var h=function(p){var d=[];for(c=0;c<4;c++){var x=i.getInt16Le();o!==null&&(r?x^=o.getInt16Le():o.putInt16Le(x)),d.push(x&65535)}f=r?0:63;for(var v=0;v<p.length;v++)for(var w=0;w<p[v][0];w++)p[v][1](d);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(d[c]):d[c]^=o.getInt16Le()),s.putInt16Le(d[c])},y=null;return y={start:function(p,d){p&&typeof p=="string"&&(p=zt.util.createBuffer(p)),n=!1,i=zt.util.createBuffer(),s=d||new zt.util.createBuffer,o=p,y.output=s},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)h([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(p){var d=!0;if(r)if(p)d=p(8,i,!r);else{var x=i.length()===8?8:8-i.length();i.fillWithByte(x,x)}if(d&&(n=!0,y.update()),!r&&(d=i.length()===0,d))if(p)d=p(8,s,!r);else{var v=s.length(),w=s.at(v-1);w>v?d=!1:s.truncate(w)}return d}},y};zt.rc2.startEncrypting=function(e,t,r){var n=zt.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};zt.rc2.createEncryptionCipher=function(e,t){return Vu(e,t,!0)};zt.rc2.startDecrypting=function(e,t,r){var n=zt.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};zt.rc2.createDecryptionCipher=function(e,t){return Vu(e,t,!1)}});var Fi=U((Vm,Xu)=>{var ko=X();Xu.exports=ko.jsbn=ko.jsbn||{};var Le,gp=0xdeadbeefcafe,Hu=(gp&16777215)==15715070;function S(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}ko.jsbn.BigInteger=S;function Y(){return new S(null)}function mp(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function xp(e,t,r,n,i,s){for(var o=t&32767,a=t>>15;--s>=0;){var u=this.data[e]&32767,c=this.data[e++]>>15,f=a*u+c*o;u=o*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+a*c+(i>>>30),r.data[n++]=u&1073741823}return i}function Gu(e,t,r,n,i,s){for(var o=t&16383,a=t>>14;--s>=0;){var u=this.data[e]&16383,c=this.data[e++]>>14,f=a*u+c*o;u=o*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+a*c,r.data[n++]=u&268435455}return i}typeof navigator>"u"?(S.prototype.am=Gu,Le=28):Hu&&navigator.appName=="Microsoft Internet Explorer"?(S.prototype.am=xp,Le=30):Hu&&navigator.appName!="Netscape"?(S.prototype.am=mp,Le=26):(S.prototype.am=Gu,Le=28);S.prototype.DB=Le;S.prototype.DM=(1<<Le)-1;S.prototype.DV=1<<Le;var Do=52;S.prototype.FV=Math.pow(2,Do);S.prototype.F1=Do-Le;S.prototype.F2=2*Le-Do;var vp="0123456789abcdefghijklmnopqrstuvwxyz",Ki=new Array,Hr,te;Hr="0".charCodeAt(0);for(te=0;te<=9;++te)Ki[Hr++]=te;Hr="a".charCodeAt(0);for(te=10;te<36;++te)Ki[Hr++]=te;Hr="A".charCodeAt(0);for(te=10;te<36;++te)Ki[Hr++]=te;function Wu(e){return vp.charAt(e)}function Qu(e,t){var r=Ki[e.charCodeAt(t)];return r??-1}function bp(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function wp(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Ze(e){var t=Y();return t.fromInt(e),t}function Sp(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?e[n]&255:Qu(e,n);if(o<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&S.ZERO.subTo(this,this)}function Ep(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Bp(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=Wu(n));o>=0;)a<t?(n=(this.data[o]&(1<<a)-1)<<t-a,n|=this.data[--o]>>(a+=this.DB-t)):(n=this.data[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=Wu(n));return i?s:"0"}function Ap(){var e=Y();return S.ZERO.subTo(this,e),e}function Cp(){return this.s<0?this.negate():this}function _p(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Mi(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Ip(){return this.t<=0?0:this.DB*(this.t-1)+Mi(this.data[this.t-1]^this.s&this.DM)}function Tp(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function Rp(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function Np(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)t.data[a]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function kp(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function Dp(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function Lp(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&S.ZERO.subTo(t,t)}function Pp(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function Up(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Y());var s=Y(),o=this.s,a=e.s,u=this.DB-Mi(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,f=s.data[c-1];if(f!=0){var l=f*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),h=this.FV/l,y=(1<<this.F1)/l,p=1<<this.F2,d=r.t,x=d-c,v=t??Y();for(s.dlShiftTo(x,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),S.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--x>=0;){var w=r.data[--d]==f?this.DM:Math.floor(r.data[d]*h+(r.data[d-1]+p)*y);if((r.data[d]+=s.am(0,w,r,x,0,c))<w)for(s.dlShiftTo(x,v),r.subTo(v,r);r.data[d]<--w;)r.subTo(v,r)}t!=null&&(r.drShiftTo(c,t),o!=a&&S.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),o<0&&S.ZERO.subTo(r,r)}}}function Kp(e){var t=Y();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(S.ZERO)>0&&e.subTo(t,t),t}function yr(e){this.m=e}function Mp(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Fp(e){return e}function Op(e){e.divRemTo(this.m,null,e)}function Vp(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function qp(e,t){e.squareTo(t),this.reduce(t)}yr.prototype.convert=Mp;yr.prototype.revert=Fp;yr.prototype.reduce=Op;yr.prototype.mulTo=Vp;yr.prototype.sqrTo=qp;function zp(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function gr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Hp(e){var t=Y();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(S.ZERO)>0&&this.m.subTo(t,t),t}function Gp(e){var t=Y();return e.copyTo(t),this.reduce(t),t}function Wp(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Qp(e,t){e.squareTo(t),this.reduce(t)}function Yp(e,t,r){e.multiplyTo(t,r),this.reduce(r)}gr.prototype.convert=Hp;gr.prototype.revert=Gp;gr.prototype.reduce=Wp;gr.prototype.mulTo=Yp;gr.prototype.sqrTo=Qp;function $p(){return(this.t>0?this.data[0]&1:this.s)==0}function Zp(e,t){if(e>4294967295||e<1)return S.ONE;var r=Y(),n=Y(),i=t.convert(this),s=Mi(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function Xp(e,t){var r;return e<256||t.isEven()?r=new yr(t):r=new gr(t),this.exp(e,r)}S.prototype.copyTo=bp;S.prototype.fromInt=wp;S.prototype.fromString=Sp;S.prototype.clamp=Ep;S.prototype.dlShiftTo=Tp;S.prototype.drShiftTo=Rp;S.prototype.lShiftTo=Np;S.prototype.rShiftTo=kp;S.prototype.subTo=Dp;S.prototype.multiplyTo=Lp;S.prototype.squareTo=Pp;S.prototype.divRemTo=Up;S.prototype.invDigit=zp;S.prototype.isEven=$p;S.prototype.exp=Zp;S.prototype.toString=Bp;S.prototype.negate=Ap;S.prototype.abs=Cp;S.prototype.compareTo=_p;S.prototype.bitLength=Ip;S.prototype.mod=Kp;S.prototype.modPowInt=Xp;S.ZERO=Ze(0);S.ONE=Ze(1);function Jp(){var e=Y();return this.copyTo(e),e}function jp(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function td(){return this.t==0?this.s:this.data[0]<<24>>24}function ed(){return this.t==0?this.s:this.data[0]<<16>>16}function rd(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function nd(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function id(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Ze(r),i=Y(),s=Y(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function sd(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var u=Qu(e,a);if(u<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&S.ZERO.subTo(this,this)}function od(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(S.ONE.shiftLeft(e-1),Lo,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(S.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function ad(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function ud(e){return this.compareTo(e)==0}function cd(e){return this.compareTo(e)<0?this:e}function fd(e){return this.compareTo(e)>0?this:e}function ld(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function hd(e,t){return e&t}function pd(e){var t=Y();return this.bitwiseTo(e,hd,t),t}function Lo(e,t){return e|t}function dd(e){var t=Y();return this.bitwiseTo(e,Lo,t),t}function Yu(e,t){return e^t}function yd(e){var t=Y();return this.bitwiseTo(e,Yu,t),t}function $u(e,t){return e&~t}function gd(e){var t=Y();return this.bitwiseTo(e,$u,t),t}function md(){for(var e=Y(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function xd(e){var t=Y();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function vd(e){var t=Y();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function bd(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function wd(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+bd(this.data[e]);return this.s<0?this.t*this.DB:-1}function Sd(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Ed(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Sd(this.data[r]^t);return e}function Bd(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Ad(e,t){var r=S.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Cd(e){return this.changeBit(e,Lo)}function _d(e){return this.changeBit(e,$u)}function Id(e){return this.changeBit(e,Yu)}function Td(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function Rd(e){var t=Y();return this.addTo(e,t),t}function Nd(e){var t=Y();return this.subTo(e,t),t}function kd(e){var t=Y();return this.multiplyTo(e,t),t}function Dd(e){var t=Y();return this.divRemTo(e,t,null),t}function Ld(e){var t=Y();return this.divRemTo(e,null,t),t}function Pd(e){var t=Y(),r=Y();return this.divRemTo(e,t,r),new Array(t,r)}function Ud(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Kd(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Ln(){}function Zu(e){return e}function Md(e,t,r){e.multiplyTo(t,r)}function Fd(e,t){e.squareTo(t)}Ln.prototype.convert=Zu;Ln.prototype.revert=Zu;Ln.prototype.mulTo=Md;Ln.prototype.sqrTo=Fd;function Od(e){return this.exp(e,new Ln)}function Vd(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function qd(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Gr(e){this.r2=Y(),this.q3=Y(),S.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function zd(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Y();return e.copyTo(t),this.reduce(t),t}function Hd(e){return e}function Gd(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Wd(e,t){e.squareTo(t),this.reduce(t)}function Qd(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Gr.prototype.convert=zd;Gr.prototype.revert=Hd;Gr.prototype.reduce=Gd;Gr.prototype.mulTo=Qd;Gr.prototype.sqrTo=Wd;function Yd(e,t){var r=e.bitLength(),n,i=Ze(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new yr(t):t.isEven()?s=new Gr(t):s=new gr(t);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=Y();for(s.sqrTo(o[1],f);a<=c;)o[a]=Y(),s.mulTo(f,o[a-2],o[a]),a+=2}var l=e.t-1,h,y=!0,p=Y(),d;for(r=Mi(e.data[l])-1;l>=0;){for(r>=u?h=e.data[l]>>r-u&c:(h=(e.data[l]&(1<<r+1)-1)<<u-r,l>0&&(h|=e.data[l-1]>>this.DB+r-u)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),y)o[h].copyTo(i),y=!1;else{for(;a>1;)s.sqrTo(i,p),s.sqrTo(p,i),a-=2;a>0?s.sqrTo(i,p):(d=i,i=p,p=d),s.mulTo(p,o[h],i)}for(;l>=0&&!(e.data[l]&1<<r);)s.sqrTo(i,p),d=i,i=p,p=d,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function $d(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function Zd(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function Xd(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return S.ZERO;for(var r=e.clone(),n=this.clone(),i=Ze(1),s=Ze(0),o=Ze(0),a=Ze(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(S.ONE)!=0)return S.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var fe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Jd=(1<<26)/fe[fe.length-1];function jd(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=fe[fe.length-1]){for(t=0;t<fe.length;++t)if(r.data[0]==fe[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<fe.length;){for(var n=fe[t],i=t+1;i<fe.length&&n<Jd;)n*=fe[i++];for(n=r.modInt(n);t<i;)if(n%fe[t++]==0)return!1}return r.millerRabin(e)}function ty(e){var t=this.subtract(S.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=ey(),s,o=0;o<e;++o){do s=new S(this.bitLength(),i);while(s.compareTo(S.ONE)<=0||s.compareTo(t)>=0);var a=s.modPow(n,this);if(a.compareTo(S.ONE)!=0&&a.compareTo(t)!=0){for(var u=1;u++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(S.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function ey(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}S.prototype.chunkSize=rd;S.prototype.toRadix=id;S.prototype.fromRadix=sd;S.prototype.fromNumber=od;S.prototype.bitwiseTo=ld;S.prototype.changeBit=Ad;S.prototype.addTo=Td;S.prototype.dMultiply=Ud;S.prototype.dAddOffset=Kd;S.prototype.multiplyLowerTo=Vd;S.prototype.multiplyUpperTo=qd;S.prototype.modInt=Zd;S.prototype.millerRabin=ty;S.prototype.clone=Jp;S.prototype.intValue=jp;S.prototype.byteValue=td;S.prototype.shortValue=ed;S.prototype.signum=nd;S.prototype.toByteArray=ad;S.prototype.equals=ud;S.prototype.min=cd;S.prototype.max=fd;S.prototype.and=pd;S.prototype.or=dd;S.prototype.xor=yd;S.prototype.andNot=gd;S.prototype.not=md;S.prototype.shiftLeft=xd;S.prototype.shiftRight=vd;S.prototype.getLowestSetBit=wd;S.prototype.bitCount=Ed;S.prototype.testBit=Bd;S.prototype.setBit=Cd;S.prototype.clearBit=_d;S.prototype.flipBit=Id;S.prototype.add=Rd;S.prototype.subtract=Nd;S.prototype.multiply=kd;S.prototype.divide=Dd;S.prototype.remainder=Ld;S.prototype.divideAndRemainder=Pd;S.prototype.modPow=Yd;S.prototype.modInverse=Xd;S.prototype.pow=Od;S.prototype.gcd=$d;S.prototype.isProbablePrime=jd});var rc=U((qm,ec)=>{var be=X();dr();yt();var ju=ec.exports=be.sha1=be.sha1||{};be.md.sha1=be.md.algorithms.sha1=ju;ju.create=function(){tc||ry();var e=null,t=be.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=be.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=be.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),Ju(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=be.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(Po.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Ju(l,r,i);var h=be.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var Po=null,tc=!1;function ry(){Po=String.fromCharCode(128),Po+=be.util.fillString(String.fromCharCode(0),64),tc=!0}function Ju(e,t,r){for(var n,i,s,o,a,u,c,f,l=r.length();l>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,u=e.h4,f=0;f<16;++f)n=r.getInt32(),t[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+u|0,l-=64}}});var sc=U((zm,ic)=>{var we=X();yt();Dn();rc();var nc=ic.exports=we.pkcs1=we.pkcs1||{};nc.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=we.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),u=a-2*s.digestLength-2;if(t.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=u,c}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=u-t.length,y=0;y<h;y++)l+="\0";var p=f.getBytes()+l+""+t;if(!i)i=we.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var d=Oi(i,a-s.digestLength-1,o),x=we.util.xorBytes(p,d,p.length),v=Oi(x,s.digestLength,o),w=we.util.xorBytes(i,v,i.length);return"\0"+w+x};nc.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=t.length,x.expectedLength=o,x}if(i===void 0?i=we.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),u=t.charAt(0),c=t.substring(1,i.digestLength+1),f=t.substring(1+i.digestLength),l=Oi(f,i.digestLength,s),h=we.util.xorBytes(c,l,c.length),y=Oi(h,o-i.digestLength-1,s),p=we.util.xorBytes(f,y,f.length),d=p.substring(0,i.digestLength),x=u!=="\0",v=0;v<i.digestLength;++v)x|=a.charAt(v)!==d.charAt(v);for(var w=1,A=i.digestLength,D=i.digestLength;D<p.length;D++){var I=p.charCodeAt(D),_=I&1^1,V=w?65534:0;x|=I&V,w=w&_,A+=w}if(x||p.charCodeAt(A)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(A+1)};function Oi(e,t,r){r||(r=we.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}});var oc=U((Hm,Uo)=>{var Xe=X();yt();Fi();Dn();(function(){if(Xe.prime){Uo.exports=Xe.prime;return}var e=Uo.exports=Xe.prime=Xe.prime||{},t=Xe.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,h){return l|h};e.generateProbablePrime=function(l,h,y){typeof h=="function"&&(y=h,h={}),h=h||{};var p=h.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var d=h.prng||Xe.random,x={nextBytes:function(v){for(var w=d.getBytesSync(v.length),A=0;A<v.length;++A)v[A]=w.charCodeAt(A)}};if(p.name==="PRIMEINC")return s(l,x,p.options,y);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(l,h,y,p){return"workers"in y?u(l,h,y,p):o(l,h,y,p)}function o(l,h,y,p){var d=c(l,h),x=0,v=f(d.bitLength());"millerRabinTests"in y&&(v=y.millerRabinTests);var w=10;"maxBlockTime"in y&&(w=y.maxBlockTime),a(d,l,h,x,v,w,p)}function a(l,h,y,p,d,x,v){var w=+new Date;do{if(l.bitLength()>h&&(l=c(h,y)),l.isProbablePrime(d))return v(null,l);l.dAddOffset(r[p++%8],0)}while(x<0||+new Date-w<x);Xe.util.setImmediate(function(){a(l,h,y,p,d,x,v)})}function u(l,h,y,p){if(typeof Worker>"u")return o(l,h,y,p);var d=c(l,h),x=y.workers,v=y.workLoad||100,w=v*30/8,A=y.workerScript||"forge/prime.worker.js";if(x===-1)return Xe.util.estimateCores(function(I,_){I&&(_=2),x=_-1,D()});D();function D(){x=Math.max(1,x);for(var I=[],_=0;_<x;++_)I[_]=new Worker(A);for(var V=x,_=0;_<x;++_)I[_].addEventListener("message",bt);var q=!1;function bt(ne){if(!q){--V;var Gt=ne.data;if(Gt.found){for(var Pt=0;Pt<I.length;++Pt)I[Pt].terminate();return q=!0,p(null,new t(Gt.prime,16))}d.bitLength()>l&&(d=c(l,h));var Ar=d.toString(16);ne.target.postMessage({hex:Ar,workLoad:v}),d.dAddOffset(w,0)}}}}function c(l,h){var y=new t(l,h),p=l-1;return y.testBit(p)||y.bitwiseTo(t.ONE.shiftLeft(p),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var qi=U((Gm,pc)=>{var L=X();kn();Fi();Ri();sc();oc();Dn();yt();typeof z>"u"&&(z=L.jsbn.BigInteger);var z,Ko=L.util.isNodejs?zr():null,m=L.asn1,ee=L.util;L.pki=L.pki||{};pc.exports=L.pki.rsa=L.rsa=L.rsa||{};var K=L.pki,ny=[6,4,2,4,2,4,6,2],iy={name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},sy={name:"RSAPrivateKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},oy={name:"RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},ay=L.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},uy={name:"DigestInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:m.Class.UNIVERSAL,type:m.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},cy=function(e){var t;if(e.algorithm in K.oids)t=K.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=m.oidToDer(t).getBytes(),i=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]),s=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]);s.value.push(m.create(m.Class.UNIVERSAL,m.Type.OID,!1,n)),s.value.push(m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,""));var o=m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),m.toDer(i).getBytes()},lc=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(z.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(z.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new z(L.util.bytesToHex(L.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(z.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n),o};K.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=hc(e,t,r)):(i=L.util.createBuffer(),i.putBytes(e));for(var o=new z(i.toHex(),16),a=lc(o,t,n),u=a.toString(16),c=L.util.createBuffer(),f=s-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(L.util.hexToBytes(u)),c.getBytes()};K.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new z(L.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=lc(o,t,r),u=a.toString(16),c=L.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(L.util.hexToBytes(u)),n!==!1?Vi(c.getBytes(),t,r):c.getBytes()};K.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||L.random,i={nextBytes:function(a){for(var u=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=u.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new z(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};K.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new z(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,o,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,c=u-1;e.pqState===0?(e.num=new z(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(z.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(ly(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(ny[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(z.ONE).gcd(e.e).compareTo(z.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(z.ONE),e.q1=e.q.subtract(z.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(z.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var f=e.e.modInverse(e.phi);e.keys={privateKey:K.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:K.rsa.setPublicKey(e.n,e.e)}}o=+new Date,a+=o-s,s=o}return e.keys!==null};K.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!L.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(ac("generateKeyPair"))return Ko.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,u,c){if(a)return n(a);n(null,{privateKey:K.privateKeyFromPem(c),publicKey:K.publicKeyFromPem(u)})});if(uc("generateKey")&&uc("exportKey"))return ee.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:fc(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return ee.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var u=K.privateKeyFromAsn1(m.fromDer(L.util.createBuffer(a)));n(null,{privateKey:u,publicKey:K.setRsaPublicKey(u.n,u.e)})}});if(cc("generateKey")&&cc("exportKey")){var i=ee.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:fc(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var u=a.target.result,c=ee.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var l=f.target.result,h=K.privateKeyFromAsn1(m.fromDer(L.util.createBuffer(l)));n(null,{privateKey:h,publicKey:K.setRsaPublicKey(h.n,h.e)})},c.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(ac("generateKeyPairSync")){var s=Ko.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:K.privateKeyFromPem(s.privateKey),publicKey:K.publicKeyFromPem(s.publicKey)}}}var o=K.rsa.createKeyPairGenerationState(e,t,r);if(!n)return K.rsa.stepKeyPairGenerationState(o,0),o.keys;fy(o,r,n)};K.setRsaPublicKey=K.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,u,c){return hc(a,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,u){return L.pkcs1.encode_rsa_oaep(u,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return K.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(u,c){c=Vi(c,r,!0);var f=m.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),l={},h=[];if(!m.validate(f,uy,l,h)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=h,y}var p=m.derToOid(l.algorithmIdentifier);if(!(p===L.oids.md2||p===L.oids.md5||p===L.oids.sha1||p===L.oids.sha224||p===L.oids.sha256||p===L.oids.sha384||p===L.oids.sha512||p===L.oids["sha512-224"]||p===L.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=p,y}if((p===L.oids.md2||p===L.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(u,c){return c=Vi(c,r,!0),u===c}});var a=K.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};K.setRsaPrivateKey=K.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var u={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return u.decrypt=function(c,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=K.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Vi};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(y,p){return L.pkcs1.decode_rsa_oaep(p,y,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,u,!1)},u.sign=function(c,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:cy},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},l=1);var h=f.encode(c,u.n.bitLength());return K.rsa.encrypt(h,u,l)},u};K.wrapRsaPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(K.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(e).getBytes())])};K.privateKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,iy,t,r)&&(e=m.fromDer(L.util.createBuffer(t.privateKey))),t={},r=[],!m.validate(e,sy,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,u,c,f,l;return i=L.util.createBuffer(t.privateKeyModulus).toHex(),s=L.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=L.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=L.util.createBuffer(t.privateKeyPrime1).toHex(),u=L.util.createBuffer(t.privateKeyPrime2).toHex(),c=L.util.createBuffer(t.privateKeyExponent1).toHex(),f=L.util.createBuffer(t.privateKeyExponent2).toHex(),l=L.util.createBuffer(t.privateKeyCoefficient).toHex(),K.setRsaPrivateKey(new z(i,16),new z(s,16),new z(o,16),new z(a,16),new z(u,16),new z(c,16),new z(f,16),new z(l,16))};K.privateKeyToAsn1=K.privateKeyToRSAPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.e)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.d)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.p)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.q)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.dP)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.dQ)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.qInv))])};K.publicKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,ay,t,r)){var n=m.derToOid(t.publicKeyOid);if(n!==K.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!m.validate(e,oy,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=L.util.createBuffer(t.publicKeyModulus).toHex(),o=L.util.createBuffer(t.publicKeyExponent).toHex();return K.setRsaPublicKey(new z(s,16),new z(o,16))};K.publicKeyToAsn1=K.publicKeyToSubjectPublicKeyInfo=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(K.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.BITSTRING,!1,[K.publicKeyToRSAPublicKey(e)])])};K.publicKeyToRSAPublicKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Se(e.e))])};function hc(e,t,r){var n=L.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var u=0;u<o;++u)n.putByte(a)}else for(;o>0;){for(var c=0,f=L.random.getBytes(o),u=0;u<o;++u)a=f.charCodeAt(u),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(e),n}function Vi(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=L.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(a===0){u=i-3-n;for(var c=0;c<u;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(a===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var f=s.getByte();if(f!==0||u!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function fy(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(a,u){if(a)return r(a);if(e.p=u,e.q!==null)return o(a,e.q);s(e.qBits,o)})}function s(a,u){L.prime.generateProbablePrime(a,n,u)}function o(a,u){if(a)return r(a);if(e.q=u,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(z.ONE).gcd(e.e).compareTo(z.ONE)!==0){e.p=null,i();return}if(e.q.subtract(z.ONE).gcd(e.e).compareTo(z.ONE)!==0){e.q=null,s(e.qBits,o);return}if(e.p1=e.p.subtract(z.ONE),e.q1=e.q.subtract(z.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(z.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,o);return}var f=e.e.modInverse(e.phi);e.keys={privateKey:K.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:K.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Se(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=L.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function ly(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function ac(e){return L.util.isNodejs&&typeof Ko[e]=="function"}function uc(e){return typeof ee.globalScope<"u"&&typeof ee.globalScope.crypto=="object"&&typeof ee.globalScope.crypto.subtle=="object"&&typeof ee.globalScope.crypto.subtle[e]=="function"}function cc(e){return typeof ee.globalScope<"u"&&typeof ee.globalScope.msCrypto=="object"&&typeof ee.globalScope.msCrypto.subtle=="object"&&typeof ee.globalScope.msCrypto.subtle[e]=="function"}function fc(e){for(var t=L.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var vc=U((Wm,xc)=>{var T=X();Bi();kn();Bu();dr();Ri();Io();Nu();Dn();zu();qi();yt();typeof dc>"u"&&(dc=T.jsbn.BigInteger);var dc,b=T.asn1,F=T.pki=T.pki||{};xc.exports=F.pbe=T.pbe=T.pbe||{};var mr=F.oids,hy={name:"EncryptedPrivateKeyInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},py={name:"PBES2Algorithms",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},dy={name:"pkcs-12PbeParams",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"iterations"}]};F.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=T.random.getBytesSync(r.saltSize),i=r.count,s=b.integerToDer(i),o,a,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,l;switch(r.algorithm){case"aes128":o=16,c=16,f=mr["aes128-CBC"],l=T.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,f=mr["aes192-CBC"],l=T.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,f=mr["aes256-CBC"],l=T.aes.createEncryptionCipher;break;case"des":o=8,c=8,f=mr.desCBC,l=T.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),p=mc(y),d=T.pkcs5.pbkdf2(t,n,i,o,p),x=T.random.getBytesSync(c),v=l(d);v.start(x),v.update(b.toDer(e)),v.finish(),u=v.output.getBytes();var w=yy(n,s,o,y);a=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(mr.pkcs5PBES2).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(mr.pkcs5PBKDF2).getBytes()),w]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(f).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,x)])])])}else if(r.algorithm==="3des"){o=24;var A=new T.util.ByteBuffer(n),d=F.pbe.generatePkcs12Key(t,A,1,i,o),x=F.pbe.generatePkcs12Key(t,A,2,i,o),v=T.des.createEncryptionCipher(d);v.start(x),v.update(b.toDer(e)),v.finish(),u=v.output.getBytes(),a=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(mr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,n),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var D=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[a,b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,u)]);return D};F.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!b.validate(e,hy,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=b.derToOid(n.encryptionOid),a=F.pbe.getCipher(o,n.encryptionParams,t),u=T.util.createBuffer(n.encryptedData);return a.update(u),a.finish()&&(r=b.fromDer(a.output)),r};F.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:b.toDer(e).getBytes()};return T.pem.encode(r,{maxline:t})};F.encryptedPrivateKeyFromPem=function(e){var t=T.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return b.fromDer(t.body)};F.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=F.wrapRsaPrivateKey(F.privateKeyToAsn1(e));return n=F.encryptPrivateKeyInfo(n,t,r),F.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=T.random.getBytesSync(16),a=T.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=T.random.getBytesSync(16),a=T.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=T.random.getBytesSync(16),a=T.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=T.random.getBytesSync(8),a=T.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=T.random.getBytesSync(8),a=T.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=T.pbe.opensslDeriveBytes(t,s.substr(0,8),o),f=a(c);f.start(s),f.update(b.toDer(F.privateKeyToAsn1(e))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:T.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return T.pem.encode(l)};F.decryptRsaPrivateKey=function(e,t){var r=null,n=T.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=T.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=T.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=T.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=T.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=T.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(l){return T.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,o=function(l){return T.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,o=function(l){return T.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=T.util.hexToBytes(n.dekInfo.parameters),u=T.pbe.opensslDeriveBytes(t,a.substr(0,8),s),c=o(u);if(c.start(a),c.update(T.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=F.decryptPrivateKeyInfo(b.fromDer(r),t):r=b.fromDer(r),r!==null&&(r=F.privateKeyFromAsn1(r)),r};F.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in T.md))throw new Error('"sha1" hash algorithm unavailable.');s=T.md.sha1.create()}var u=s.digestLength,c=s.blockLength,f=new T.util.ByteBuffer,l=new T.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)l.putInt16(e.charCodeAt(a));l.putInt16(0)}var h=l.length(),y=t.length(),p=new T.util.ByteBuffer;p.fillWithByte(r,c);var d=c*Math.ceil(y/c),x=new T.util.ByteBuffer;for(a=0;a<d;a++)x.putByte(t.at(a%y));var v=c*Math.ceil(h/c),w=new T.util.ByteBuffer;for(a=0;a<v;a++)w.putByte(l.at(a%h));var A=x;A.putBuffer(w);for(var D=Math.ceil(i/u),I=1;I<=D;I++){var _=new T.util.ByteBuffer;_.putBytes(p.bytes()),_.putBytes(A.bytes());for(var V=0;V<n;V++)s.start(),s.update(_.getBytes()),_=s.digest();var q=new T.util.ByteBuffer;for(a=0;a<c;a++)q.putByte(_.at(a%u));var bt=Math.ceil(y/c)+Math.ceil(h/c),ne=new T.util.ByteBuffer;for(o=0;o<bt;o++){var Gt=new T.util.ByteBuffer(A.getBytes(c)),Pt=511;for(a=q.length()-1;a>=0;a--)Pt=Pt>>8,Pt+=q.at(a)+Gt.at(a),Gt.setAt(a,Pt&255);ne.putBuffer(Gt)}A=ne,f.putBuffer(_)}return f.truncate(f.length()-i),f};F.pbe.getCipher=function(e,t,r){switch(e){case F.oids.pkcs5PBES2:return F.pbe.getCipherForPBES2(e,t,r);case F.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case F.oids["pbewithSHAAnd40BitRC2-CBC"]:return F.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};F.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!b.validate(t,py,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=b.derToOid(n.kdfOid),e!==F.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=b.derToOid(n.encOid),e!==F.oids["aes128-CBC"]&&e!==F.oids["aes192-CBC"]&&e!==F.oids["aes256-CBC"]&&e!==F.oids["des-EDE3-CBC"]&&e!==F.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=T.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var u,c;switch(F.oids[e]){case"aes128-CBC":u=16,c=T.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=T.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=T.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=T.des.createDecryptionCipher;break;case"desCBC":u=8,c=T.des.createDecryptionCipher;break}var f=gc(n.prfOid),l=T.pkcs5.pbkdf2(r,o,a,u,f),h=n.encIv,y=c(l);return y.start(h),y};F.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!b.validate(t,dy,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=T.util.createBuffer(n.salt),a=T.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var u,c,f;switch(e){case F.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=T.des.startDecrypting;break;case F.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(d,x){var v=T.rc2.createDecryptionCipher(d,40);return v.start(x,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var l=gc(n.prfOid),h=F.pbe.generatePkcs12Key(r,o,1,a,u,l);l.start();var y=F.pbe.generatePkcs12Key(r,o,2,a,c,l);return f(h,y)};F.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in T.md))throw new Error('"md5" hash algorithm unavailable.');n=T.md.md5.create()}t===null&&(t="");for(var i=[yc(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(yc(n,i[o-1]+e+t));return i.join("").substr(0,r)};function yc(e,t){return e.start().update(t).digest().getBytes()}function gc(e){var t;if(!e)t="hmacWithSHA1";else if(t=F.oids[b.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return mc(t)}function mc(e){var t=T.md;switch(e){case"hmacWithSHA224":t=T.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function yy(e,t,r,n){var i=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,T.util.hexToBytes(r.toString(16))),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(F.oids[n]).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])),i}});var Lc=U((yx,Dc)=>{var rt=X();dr();yt();var Pn=Dc.exports=rt.sha512=rt.sha512||{};rt.md.sha512=rt.md.algorithms.sha512=Pn;var Nc=rt.sha384=rt.sha512.sha384=rt.sha512.sha384||{};Nc.create=function(){return Pn.create("SHA-384")};rt.md.sha384=rt.md.algorithms.sha384=Nc;rt.sha512.sha256=rt.sha512.sha256||{create:function(){return Pn.create("SHA-512/256")}};rt.md["sha512/256"]=rt.md.algorithms["sha512/256"]=rt.sha512.sha256;rt.sha512.sha224=rt.sha512.sha224||{create:function(){return Pn.create("SHA-512/224")}};rt.md["sha512/224"]=rt.md.algorithms["sha512/224"]=rt.sha512.sha224;Pn.create=function(e){if(kc||vy(),typeof e>"u"&&(e="SHA-512"),!(e in xr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=xr[e],r=null,n=rt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var u=a.messageLengthSize/4,c=0;c<u;++c)a.fullMessageLength.push(0);n=rt.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return a},a.start(),a.update=function(u,c){c==="utf8"&&(u=rt.util.encodeUtf8(u));var f=u.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),Rc(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var u=rt.util.createBuffer();u.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=c&a.blockLength-1;u.putBytes(Oo.substr(0,a.blockLength-f));for(var l,h,y=a.fullMessageLength[0]*8,p=0;p<a.fullMessageLength.length-1;++p)l=a.fullMessageLength[p+1]*8,h=l/4294967296>>>0,y+=h,u.putInt32(y>>>0),y=l>>>0;u.putInt32(y);for(var d=new Array(r.length),p=0;p<r.length;++p)d[p]=r[p].slice(0);Rc(d,i,u);var x=rt.util.createBuffer(),v;e==="SHA-512"?v=d.length:e==="SHA-384"?v=d.length-2:v=d.length-4;for(var p=0;p<v;++p)x.putInt32(d[p][0]),(p!==v-1||e!=="SHA-512/224")&&x.putInt32(d[p][1]);return x},a};var Oo=null,kc=!1,Vo=null,xr=null;function vy(){Oo=String.fromCharCode(128),Oo+=rt.util.fillString(String.fromCharCode(0),128),Vo=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],xr={},xr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],xr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],xr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],xr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],kc=!0}function Rc(e,t,r){for(var n,i,s,o,a,u,c,f,l,h,y,p,d,x,v,w,A,D,I,_,V,q,bt,ne,Gt,Pt,Ar,ti,mt,Ft,P,ps,ds,ys,gs,ma=r.length();ma>=128;){for(mt=0;mt<16;++mt)t[mt][0]=r.getInt32()>>>0,t[mt][1]=r.getInt32()>>>0;for(;mt<80;++mt)ps=t[mt-2],Ft=ps[0],P=ps[1],n=((Ft>>>19|P<<13)^(P>>>29|Ft<<3)^Ft>>>6)>>>0,i=((Ft<<13|P>>>19)^(P<<3|Ft>>>29)^(Ft<<26|P>>>6))>>>0,ys=t[mt-15],Ft=ys[0],P=ys[1],s=((Ft>>>1|P<<31)^(Ft>>>8|P<<24)^Ft>>>7)>>>0,o=((Ft<<31|P>>>1)^(Ft<<24|P>>>8)^(Ft<<25|P>>>7))>>>0,ds=t[mt-7],gs=t[mt-16],P=i+ds[1]+o+gs[1],t[mt][0]=n+ds[0]+s+gs[0]+(P/4294967296>>>0)>>>0,t[mt][1]=P>>>0;for(d=e[0][0],x=e[0][1],v=e[1][0],w=e[1][1],A=e[2][0],D=e[2][1],I=e[3][0],_=e[3][1],V=e[4][0],q=e[4][1],bt=e[5][0],ne=e[5][1],Gt=e[6][0],Pt=e[6][1],Ar=e[7][0],ti=e[7][1],mt=0;mt<80;++mt)c=((V>>>14|q<<18)^(V>>>18|q<<14)^(q>>>9|V<<23))>>>0,f=((V<<18|q>>>14)^(V<<14|q>>>18)^(q<<23|V>>>9))>>>0,l=(Gt^V&(bt^Gt))>>>0,h=(Pt^q&(ne^Pt))>>>0,a=((d>>>28|x<<4)^(x>>>2|d<<30)^(x>>>7|d<<25))>>>0,u=((d<<4|x>>>28)^(x<<30|d>>>2)^(x<<25|d>>>7))>>>0,y=(d&v|A&(d^v))>>>0,p=(x&w|D&(x^w))>>>0,P=ti+f+h+Vo[mt][1]+t[mt][1],n=Ar+c+l+Vo[mt][0]+t[mt][0]+(P/4294967296>>>0)>>>0,i=P>>>0,P=u+p,s=a+y+(P/4294967296>>>0)>>>0,o=P>>>0,Ar=Gt,ti=Pt,Gt=bt,Pt=ne,bt=V,ne=q,P=_+i,V=I+n+(P/4294967296>>>0)>>>0,q=P>>>0,I=A,_=D,A=v,D=w,v=d,w=x,P=i+o,d=n+s+(P/4294967296>>>0)>>>0,x=P>>>0;P=e[0][1]+x,e[0][0]=e[0][0]+d+(P/4294967296>>>0)>>>0,e[0][1]=P>>>0,P=e[1][1]+w,e[1][0]=e[1][0]+v+(P/4294967296>>>0)>>>0,e[1][1]=P>>>0,P=e[2][1]+D,e[2][0]=e[2][0]+A+(P/4294967296>>>0)>>>0,e[2][1]=P>>>0,P=e[3][1]+_,e[3][0]=e[3][0]+I+(P/4294967296>>>0)>>>0,e[3][1]=P>>>0,P=e[4][1]+q,e[4][0]=e[4][0]+V+(P/4294967296>>>0)>>>0,e[4][1]=P>>>0,P=e[5][1]+ne,e[5][0]=e[5][0]+bt+(P/4294967296>>>0)>>>0,e[5][1]=P>>>0,P=e[6][1]+Pt,e[6][0]=e[6][0]+Gt+(P/4294967296>>>0)>>>0,e[6][1]=P>>>0,P=e[7][1]+ti,e[7][0]=e[7][0]+Ar+(P/4294967296>>>0)>>>0,e[7][1]=P>>>0,ma-=128}}});var Ng={};wt(Ng,{FloodSub:()=>hs,floodsub:()=>Rg,multicodec:()=>ga});var ws={};wt(ws,{identity:()=>Xf});function Wf(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var d=0,x=0,v=0,w=p.length;v!==w&&p[v]===0;)v++,d++;for(var A=(w-v)*f+1>>>0,D=new Uint8Array(A);v!==w;){for(var I=p[v],_=0,V=A-1;(I!==0||_<x)&&V!==-1;V--,_++)I+=256*D[V]>>>0,D[V]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");x=_,v++}for(var q=A-x;q!==A&&D[q]===0;)q++;for(var bt=u.repeat(d);q<A;++q)bt+=e.charAt(D[q]);return bt}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var d=0;if(p[d]!==" "){for(var x=0,v=0;p[d]===u;)x++,d++;for(var w=(p.length-d)*c+1>>>0,A=new Uint8Array(w);p[d];){var D=r[p.charCodeAt(d)];if(D===255)return;for(var I=0,_=w-1;(D!==0||I<v)&&_!==-1;_--,I++)D+=a*A[_]>>>0,A[_]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");v=I,d++}if(p[d]!==" "){for(var V=w-v;V!==w&&A[V]===0;)V++;for(var q=new Uint8Array(x+(w-V)),bt=x;V!==w;)q[bt++]=A[V++];return q}}}function y(p){var d=h(p);if(d)return d;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:y}}var Qf=Wf,Yf=Qf,va=Yf;var Lg=new Uint8Array(0);var ba=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Ce=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var wa=e=>new TextEncoder().encode(e),Sa=e=>new TextDecoder().decode(e);var ms=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},xs=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ba(this,t)}},vs=class{constructor(t){this.decoders=t}or(t){return Ba(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Ba=(e,t)=>new vs({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),bs=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ms(t,r,n),this.decoder=new xs(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},Cr=({name:e,prefix:t,encode:r,decode:n})=>new bs(e,t,r,n),Oe=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=va(r,t);return Cr({prefix:e,name:t,encode:n,decode:s=>Ce(i(s))})},$f=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|l,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Zf=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},lt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Cr({prefix:t,name:e,encode(i){return Zf(i,n,r)},decode(i){return $f(i,n,r,e)}});var Xf=Cr({prefix:"\0",name:"identity",encode:e=>Sa(e),decode:e=>wa(e)});var Ss={};wt(Ss,{base2:()=>Jf});var Jf=lt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Es={};wt(Es,{base8:()=>jf});var jf=lt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bs={};wt(Bs,{base10:()=>tl});var tl=Oe({prefix:"9",name:"base10",alphabet:"0123456789"});var As={};wt(As,{base16:()=>el,base16upper:()=>rl});var el=lt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rl=lt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Cs={};wt(Cs,{base32:()=>Ve,base32hex:()=>ol,base32hexpad:()=>ul,base32hexpadupper:()=>cl,base32hexupper:()=>al,base32pad:()=>il,base32padupper:()=>sl,base32upper:()=>nl,base32z:()=>fl});var Ve=lt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nl=lt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),il=lt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sl=lt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ol=lt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),al=lt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ul=lt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cl=lt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fl=lt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _s={};wt(_s,{base36:()=>ll,base36upper:()=>hl});var ll=Oe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hl=Oe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Is={};wt(Is,{base58btc:()=>Rt,base58flickr:()=>pl});var Rt=Oe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pl=Oe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ts={};wt(Ts,{base64:()=>nr,base64pad:()=>dl,base64url:()=>yl,base64urlpad:()=>gl});var nr=lt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dl=lt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yl=lt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gl=lt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Rs={};wt(Rs,{base256emoji:()=>wl});var Aa=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ml=Aa.reduce((e,t,r)=>(e[r]=t,e),[]),xl=Aa.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function vl(e){return e.reduce((t,r)=>(t+=ml[r],t),"")}function bl(e){let t=[];for(let r of e){let n=xl[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var wl=Cr({prefix:"\u{1F680}",name:"base256emoji",encode:vl,decode:bl});var Ls={};wt(Ls,{sha256:()=>St,sha512:()=>Ol});var Sl=Ia,Ca=128,El=127,Bl=~El,Al=Math.pow(2,31);function Ia(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Al;)t[r++]=e&255|Ca,e/=128;for(;e&Bl;)t[r++]=e&255|Ca,e>>>=7;return t[r]=e|0,Ia.bytes=r-n+1,t}var Cl=Ns,_l=128,_a=127;function Ns(e,n){var r=0,n=n||0,i=0,s=n,o,a=e.length;do{if(s>=a)throw Ns.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=i<28?(o&_a)<<i:(o&_a)*Math.pow(2,i),i+=7}while(o>=_l);return Ns.bytes=s-n,r}var Il=Math.pow(2,7),Tl=Math.pow(2,14),Rl=Math.pow(2,21),Nl=Math.pow(2,28),kl=Math.pow(2,35),Dl=Math.pow(2,42),Ll=Math.pow(2,49),Pl=Math.pow(2,56),Ul=Math.pow(2,63),Kl=function(e){return e<Il?1:e<Tl?2:e<Rl?3:e<Nl?4:e<kl?5:e<Dl?6:e<Ll?7:e<Pl?8:e<Ul?9:10},Ml={encode:Sl,decode:Cl,encodingLength:Kl},Fl=Ml,fn=Fl;var ln=(e,t=0)=>[fn.decode(e,t),fn.decode.bytes],_r=(e,t,r=0)=>(fn.encode(e,t,r),t),Ir=e=>fn.encodingLength(e);var pe=(e,t)=>{let r=t.byteLength,n=Ir(e),i=n+Ir(r),s=new Uint8Array(i+r);return _r(e,s,0),_r(r,s,n),s.set(t,i),new Tr(e,r,t,s)},hn=e=>{let t=Ce(e),[r,n]=ln(t),[i,s]=ln(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Tr(r,i,o,t)},Ta=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&ba(e.bytes,r.bytes)}},Tr=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var Ds=({name:e,code:t,encode:r})=>new ks(e,t,r),ks=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?pe(this.code,r):r.then(n=>pe(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Na=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),St=Ds({name:"sha2-256",code:18,encode:Na("SHA-256")}),Ol=Ds({name:"sha2-512",code:19,encode:Na("SHA-512")});var Ps={};wt(Ps,{identity:()=>qe});var ka=0,Vl="identity",Da=Ce,ql=e=>pe(ka,Da(e)),qe={code:ka,name:Vl,encode:Da,digest:ql};var e1=new TextEncoder,r1=new TextDecoder;var La=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return Wl(r,Us(e),t||Rt.encoder);default:return Ql(r,Us(e),t||Ve.encoder)}};var Pa=new WeakMap,Us=e=>{let t=Pa.get(e);if(t==null){let r=new Map;return Pa.set(e,r),r}return t},ut=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==pn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Yl)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ut.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=pe(t,r);return ut.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return ut.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&Ta(t.multihash,n.multihash)}toString(t){return La(this,t)}toJSON(){return{"/":La(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof ut)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:o}=r;return new ut(n,i,s,o||Ua(n,i,s.bytes))}else if(r[$l]===!0){let{version:n,multihash:i,code:s}=r,o=hn(i);return ut.create(n,s,o)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==pn)throw new Error(`Version 0 CID must use dag-pb (code: ${pn}) block encoding`);return new ut(t,r,n,n.bytes)}case 1:{let i=Ua(t,r,n.bytes);return new ut(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return ut.create(0,pn,t)}static createV1(t,r){return ut.create(1,t,r)}static decode(t){let[r,n]=ut.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=ut.inspectBytes(t),n=r.size-r.multihashSize,i=Ce(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new Tr(r.multihashCode,r.digestSize,s,i);return[r.version===0?ut.createV0(o):ut.createV1(r.codec,o),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,h]=ln(t.subarray(r));return r+=h,l},i=n(),s=pn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),c=r+u,f=c-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:c}}static parse(t,r){let[n,i]=Gl(t,r),s=ut.decode(i);return Us(s).set(n,t),s}},Gl=(e,t)=>{switch(e[0]){case"Q":{let r=t||Rt;return[Rt.prefix,r.decode(`${Rt.prefix}${e}`)]}case Rt.prefix:{let r=t||Rt;return[Rt.prefix,r.decode(e)]}case Ve.prefix:{let r=t||Ve;return[Ve.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},Wl=(e,t,r)=>{let{prefix:n}=r;if(n!==Rt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return i},Ql=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let s=r.encode(e);return t.set(n,s),s}else return i},pn=112,Yl=18,Ua=(e,t,r)=>{let n=Ir(e),i=n+Ir(t),s=new Uint8Array(i+r.byteLength);return _r(e,s,0),_r(t,s,n),s.set(r,i),s},$l=Symbol.for("@ipld/js-cid/CID");var Nr={...ws,...Ss,...Es,...Bs,...As,...Cs,..._s,...Is,...Ts,...Rs},h1={...Ls,...Ps};function ir(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function _e(e=0){return globalThis.Buffer?.alloc!=null?ir(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function Ie(e=0){return globalThis.Buffer?.allocUnsafe!=null?ir(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Ma(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Ka=Ma("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ks=Ma("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Ie(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Zl={utf8:Ka,"utf-8":Ka,hex:Nr.base16,latin1:Ks,ascii:Ks,binary:Ks,...Nr},ni=Zl;function ht(e,t="utf8"){let r=ni[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var de=M(za(),1);de.default.formatters.b=e=>e==null?"undefined":Rt.baseEncode(e);de.default.formatters.t=e=>e==null?"undefined":Ve.baseEncode(e);de.default.formatters.m=e=>e==null?"undefined":nr.baseEncode(e);de.default.formatters.p=e=>e==null?"undefined":e.toString();de.default.formatters.c=e=>e==null?"undefined":e.toString();de.default.formatters.k=e=>e==null?"undefined":e.toString();function ze(e){return Object.assign((0,de.default)(e),{error:(0,de.default)(`${e}:error`),trace:(0,de.default)(`${e}:trace`)})}var or=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Te,Pr=class extends EventTarget{constructor(){super(...arguments),Te.set(this,new Map)}listenerCount(t){let r=or(this,Te,"f").get(t);return r==null?0:r.length}addEventListener(t,r,n){super.addEventListener(t,r,n);let i=or(this,Te,"f").get(t);i==null&&(i=[],or(this,Te,"f").set(t,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(t,r,n){super.removeEventListener(t.toString(),r??null,n);let i=or(this,Te,"f").get(t);i!=null&&(i=i.filter(({callback:s})=>s!==r),or(this,Te,"f").set(t,i))}dispatchEvent(t){let r=super.dispatchEvent(t),n=or(this,Te,"f").get(t.type);return n==null||(n=n.filter(({once:i})=>!i),or(this,Te,"f").set(t.type,n)),r}};Te=new WeakMap;var Ms=class extends Event{constructor(t,r){super(t,r),this.detail=r?.detail}},Re=globalThis.CustomEvent??Ms;var Tt=M(Nt(),1);var oi=class{constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){let t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return this.buffer[this.btm]===void 0}},Ur=class{constructor(t={}){this.hwm=t.splitLimit??16,this.head=new oi(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return t?.byteLength!=null?t.byteLength:1}push(t){if(t?.value!=null&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){let r=this.head;this.head=r.next=new oi(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(t===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return t?.value!=null&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}};function Kr(e={}){return fh(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},e)}function fh(e,t){t=t??{};let r=t.onEnd,n=new Ur,i,s,o,a=async()=>n.isEmpty()?o?{done:!0}:await new Promise((d,x)=>{s=v=>{s=null,n.push(v);try{d(e(n))}catch(w){x(w)}return i}}):e(n),u=d=>s!=null?s(d):(n.push(d),i),c=d=>(n=new Ur,s!=null?s({error:d}):(n.push({error:d}),i)),f=d=>{if(o)return i;if(t?.objectMode!==!0&&d?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:d})},l=d=>o?i:(o=!0,d!=null?c(d):u({done:!0})),h=()=>(n=new Ur,l(),{done:!0}),y=d=>(l(d),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:h,throw:y,push:f,end:l,get readableLength(){return n.size}},r==null)return i;let p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(d){return p.throw(d),r!=null&&(r(d),r=void 0),{done:!0}},return(){return p.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(d){return p.end(d),r!=null&&(r(d),r=void 0),i},get readableLength(){return p.readableLength}},i}async function*Fs(...e){let t=Kr({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(e.map(async r=>{for await(let n of r)t.push(n)})),t.end()}catch(r){t.end(r)}}),yield*t}var lh=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},Wa=e=>e!=null&&(typeof e[Symbol.asyncIterator]=="function"||typeof e[Symbol.iterator]=="function"||typeof e.next=="function"),Os=e=>e!=null&&typeof e.sink=="function"&&Wa(e.source),hh=e=>t=>{let r=e.sink(t);if(r.then!=null){let n=Kr({objectMode:!0});return r.then(()=>{n.end()},s=>{n.end(s)}),Fs(n,async function*(){yield*e.source,n.end()}())}return e.source};function dn(e,...t){if(Os(e)){let n=e;e=()=>n.source}else if(Wa(e)){let n=e;e=()=>n}let r=[e,...t];if(r.length>1&&Os(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Os(r[n])&&(r[n]=hh(r[n]));return lh(...r)}var n0=M(Ya(),1);var gn=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},qs=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},$a=e=>globalThis.DOMException===void 0?new qs(e):new DOMException(e),Za=e=>{let t=e.reason===void 0?$a("This operation was aborted."):e.reason;return t instanceof Error?t:$a(t)};function zs(e,t,r,n){let i,s=new Promise((o,a)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){o(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&a(Za(u)),u.addEventListener("abort",()=>{a(Za(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let u=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,c=r instanceof Error?r:new gn(u);typeof e.cancel=="function"&&e.cancel(),a(c)},t),(async()=>{try{o(await e)}catch(u){a(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function Hs(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var ar=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ne,mn=class{constructor(){Ne.set(this,[])}enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&ar(this,Ne,"f")[this.size-1].priority>=r.priority){ar(this,Ne,"f").push(n);return}let i=Hs(ar(this,Ne,"f"),n,(s,o)=>o.priority-s.priority);ar(this,Ne,"f").splice(i,0,n)}dequeue(){let t=ar(this,Ne,"f").shift();return t?.run}filter(t){return ar(this,Ne,"f").filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return ar(this,Ne,"f").length}};Ne=new WeakMap;var ct=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},N=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},pt,vn,bn,Ge,pi,wn,ui,ie,xn,Qt,ci,Yt,Sn,He,fi,Xa,Ja,r0,ja,t0,e0,li,Gs,Ws,di,hi,yh=new gn,Qs=class extends Error{},En=class extends n0.default{constructor(t){var r,n,i,s;if(super(),pt.add(this),vn.set(this,void 0),bn.set(this,void 0),Ge.set(this,0),pi.set(this,void 0),wn.set(this,void 0),ui.set(this,0),ie.set(this,void 0),xn.set(this,void 0),Qt.set(this,void 0),ci.set(this,void 0),Yt.set(this,0),Sn.set(this,void 0),He.set(this,void 0),fi.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:mn,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);ct(this,vn,t.carryoverConcurrencyCount,"f"),ct(this,bn,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,"f"),ct(this,pi,t.intervalCap,"f"),ct(this,wn,t.interval,"f"),ct(this,Qt,new t.queueClass,"f"),ct(this,ci,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,ct(this,fi,t.throwOnTimeout===!0,"f"),ct(this,He,t.autoStart===!1,"f")}get concurrency(){return N(this,Sn,"f")}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);ct(this,Sn,t,"f"),N(this,pt,"m",di).call(this)}async add(t,r={}){return new Promise((n,i)=>{let s=async()=>{var o,a,u;ct(this,Yt,(a=N(this,Yt,"f"),a++,a),"f"),ct(this,Ge,(u=N(this,Ge,"f"),u++,u),"f");try{if(!((o=r.signal)===null||o===void 0)&&o.aborted){i(new Qs("The task was aborted."));return}let f=await(this.timeout===void 0&&r.timeout===void 0?t({signal:r.signal}):zs(Promise.resolve(t({signal:r.signal})),r.timeout===void 0?this.timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?N(this,fi,"f"):r.throwOnTimeout)&&i(yh)}));n(f),this.emit("completed",f)}catch(c){i(c),this.emit("error",c)}N(this,pt,"m",r0).call(this)};N(this,Qt,"f").enqueue(s,r),N(this,pt,"m",li).call(this),this.emit("add")})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return N(this,He,"f")?(ct(this,He,!1,"f"),N(this,pt,"m",di).call(this),this):this}pause(){ct(this,He,!0,"f")}clear(){ct(this,Qt,new(N(this,ci,"f")),"f")}async onEmpty(){N(this,Qt,"f").size!==0&&await N(this,pt,"m",hi).call(this,"empty")}async onSizeLessThan(t){N(this,Qt,"f").size<t||await N(this,pt,"m",hi).call(this,"next",()=>N(this,Qt,"f").size<t)}async onIdle(){N(this,Yt,"f")===0&&N(this,Qt,"f").size===0||await N(this,pt,"m",hi).call(this,"idle")}get size(){return N(this,Qt,"f").size}sizeBy(t){return N(this,Qt,"f").filter(t).length}get pending(){return N(this,Yt,"f")}get isPaused(){return N(this,He,"f")}};vn=new WeakMap,bn=new WeakMap,Ge=new WeakMap,pi=new WeakMap,wn=new WeakMap,ui=new WeakMap,ie=new WeakMap,xn=new WeakMap,Qt=new WeakMap,ci=new WeakMap,Yt=new WeakMap,Sn=new WeakMap,He=new WeakMap,fi=new WeakMap,pt=new WeakSet,Xa=function(){return N(this,bn,"f")||N(this,Ge,"f")<N(this,pi,"f")},Ja=function(){return N(this,Yt,"f")<N(this,Sn,"f")},r0=function(){var t;ct(this,Yt,(t=N(this,Yt,"f"),t--,t),"f"),N(this,pt,"m",li).call(this),this.emit("next")},ja=function(){this.emit("empty"),N(this,Yt,"f")===0&&this.emit("idle")},t0=function(){N(this,pt,"m",Ws).call(this),N(this,pt,"m",Gs).call(this),ct(this,xn,void 0,"f")},e0=function(){let t=Date.now();if(N(this,ie,"f")===void 0){let r=N(this,ui,"f")-t;if(r<0)ct(this,Ge,N(this,vn,"f")?N(this,Yt,"f"):0,"f");else return N(this,xn,"f")===void 0&&ct(this,xn,setTimeout(()=>{N(this,pt,"m",t0).call(this)},r),"f"),!0}return!1},li=function(){if(N(this,Qt,"f").size===0)return N(this,ie,"f")&&clearInterval(N(this,ie,"f")),ct(this,ie,void 0,"f"),N(this,pt,"m",ja).call(this),!1;if(!N(this,He,"f")){let t=!N(this,pt,"a",e0);if(N(this,pt,"a",Xa)&&N(this,pt,"a",Ja)){let r=N(this,Qt,"f").dequeue();return r?(this.emit("active"),r(),t&&N(this,pt,"m",Gs).call(this),!0):!1}}return!1},Gs=function(){N(this,bn,"f")||N(this,ie,"f")!==void 0||(ct(this,ie,setInterval(()=>{N(this,pt,"m",Ws).call(this)},N(this,wn,"f")),"f"),ct(this,ui,Date.now()+N(this,wn,"f"),"f"))},Ws=function(){N(this,Ge,"f")===0&&N(this,Yt,"f")===0&&N(this,ie,"f")&&(clearInterval(N(this,ie,"f")),ct(this,ie,void 0,"f")),ct(this,Ge,N(this,vn,"f")?N(this,Yt,"f"):0,"f"),N(this,pt,"m",di).call(this)},di=function(){for(;N(this,pt,"m",li).call(this););},hi=async function(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})};var Ys=Symbol.for("@libp2p/topology");var i0=()=>{},$s=class{constructor(t){this.min=t.min??0,this.max=t.max??1/0,this.peers=new Set,this.onConnect=t.onConnect??i0,this.onDisconnect=t.onDisconnect??i0}get[Symbol.toStringTag](){return Ys.toString()}get[Ys](){return!0}async setRegistrar(t){this.registrar=t}disconnect(t){this.onDisconnect(t)}};function s0(e){return new $s(e)}var Et={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_MISSING_KEY:"ERR_MISSING_KEY",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_MISSING_FROM:"ERR_MISSING_FROM",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO",ERR_TOPIC_VALIDATOR_REJECT:"ERR_TOPIC_VALIDATOR_REJECT"};function Dt(e,t){t==null&&(t=e.reduce((i,s)=>i+s.length,0));let r=Ie(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return ir(r)}function Lt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var a0=Symbol.for("@achingbrain/uint8arraylist");function o0(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let i=r+n.byteLength;if(t<i)return{buf:n,index:t-r};r=i}throw new RangeError("index is out of bounds")}function yi(e){return Boolean(e?.[a0])}var Jt=class{constructor(...t){Object.defineProperty(this,a0,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(yi(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(yi(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=o0(this.bufs,t);return r.buf[r.index]}set(t,r){let n=o0(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(yi(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:i}=this._subList(t,r);return Dt(n,i)}subarray(t,r){let{bufs:n,length:i}=this._subList(t,r);return n.length===1?n[0]:Dt(n,i)}sublist(t,r){let{bufs:n,length:i}=this._subList(t,r),s=new Jt;return s.length=i,s.bufs=n,s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let o=this.bufs[s],a=i,u=a+o.byteLength;if(i=u,t>=u)continue;let c=t>=a&&t<u,f=r>a&&r<=u;if(c&&f){if(t===a&&r===u){n.push(o);break}let l=t-a;n.push(o.subarray(l,l+(r-t)));break}if(c){if(t===0){n.push(o);continue}n.push(o.subarray(t-a));continue}if(f){if(r===u){n.push(o);break}n.push(o.subarray(0,r-a));break}n.push(o)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!yi(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;let a=o,u=this.byteLength-n.byteLength,c=n.byteLength-1,f;for(let l=r;l<=u;l+=f){f=0;for(let h=c;h>=0;h--){let y=this.get(l+h);if(n[h]!==y){f=Math.max(1,h-a[y]);break}}if(f===0)return l}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=Ie(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let i=_e(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let i=_e(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let i=_e(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=Ie(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let i=_e(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let i=_e(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let i=_e(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let i=_e(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let i=_e(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof Jt)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Lt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new Jt;return n.bufs=t,r==null&&(r=t.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};function gi(e){return e instanceof Uint8Array?{get(t){return e[t]},set(t,r){e[t]=r}}:{get(t){return e.get(t)},set(t,r){e.set(t,r)}}}var u0=4294967296,$t=class{constructor(t=0,r=0){this.hi=t,this.lo=r}toBigInt(t){if(t===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(t){return Number(this.toBigInt(t))}zzDecode(){let t=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^t)>>>0,n=(this.hi>>>1^t)>>>0;return new $t(n,r)}zzEncode(){let t=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^t)>>>0,n=(this.lo<<1^t)>>>0;return new $t(r,n)}toBytes(t,r=0){let n=gi(t);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(t){if(t===0n)return new $t;let r=t<0;r&&(t=-t);let n=Number(t>>32n)|0,i=Number(t-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>u0&&(i=0,++n>u0&&(n=0))),new $t(n,i)}static fromNumber(t){if(t===0)return new $t;let r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new $t(i,n)}static fromBytes(t,r=0){let n=gi(t),i=new $t,s=0;if(t.length-r>4){for(;s<4;++s)if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;s=0}else for(;s<4;++s){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i}if(t.length-r>4){for(;s<5;++s)if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}else if(r<t.byteLength)for(;s<5;++s){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var gh=Math.pow(2,7),mh=Math.pow(2,14),xh=Math.pow(2,21),vh=Math.pow(2,28),bh=Math.pow(2,35),wh=Math.pow(2,42),Sh=Math.pow(2,49),Eh=Math.pow(2,56),Bh=Math.pow(2,63),ur={encodingLength(e){return e<gh?1:e<mh?2:e<xh?3:e<vh?4:e<bh?5:e<wh?6:e<Sh?7:e<Eh?8:e<Bh?9:10},encode(e,t,r=0){if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return t==null&&(t=Ie(ur.encodingLength(e))),$t.fromNumber(e).toBytes(t,r),t},decode(e,t=0){return $t.fromBytes(e,t).toNumber(!0)}};function c0(e){return globalThis?.Buffer?.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}var mi=e=>{let t=ur.encodingLength(e),r=c0(t);return ur.encode(e,r),mi.bytes=t,r};mi.bytes=0;function xi(e){e=e??{};let t=e.lengthEncoder??mi;return async function*(n){for await(let i of n){let s=t(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}}}xi.single=(e,t)=>{t=t??{};let r=t.lengthEncoder??mi;return new Jt(r(e.byteLength),e)};var Bn=M(Nt(),1),Ah=8,Ch=1024*1024*4,cr;(function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"})(cr||(cr={}));var Zs=e=>{let t=ur.decode(e);return Zs.bytes=ur.encodingLength(t),t};Zs.bytes=0;function An(e){return async function*(r){let n=new Jt,i=cr.LENGTH,s=-1,o=e?.lengthDecoder??Zs,a=e?.maxLengthLength??Ah,u=e?.maxDataLength??Ch;for await(let c of r)for(n.append(c);n.byteLength>0;){if(i===cr.LENGTH)try{if(s=o(n),s<0)throw(0,Bn.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(s>u)throw(0,Bn.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let f=o.bytes;n.consume(f),e?.onLength!=null&&e.onLength(s),i=cr.DATA}catch(f){if(f instanceof RangeError){if(n.byteLength>a)throw(0,Bn.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw f}if(i===cr.DATA){if(n.byteLength<s)break;let f=n.sublist(0,s);n.consume(s),e?.onData!=null&&e.onData(f),yield f,i=cr.LENGTH}}if(n.byteLength>0)throw(0,Bn.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}}An.fromReader=(e,t)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await e.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return An({...t??{},onLength:s=>{r=s}})(n)};var Cn=class extends Error{constructor(t,r){super(t??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function f0(e){if(e!=null){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}function l0(e,t,r){let n=r??{},i=f0(e);async function*s(){let o,a=()=>{o?.()};for(t.addEventListener("abort",a);;){let u;try{if(t.aborted){let{abortMessage:f,abortCode:l}=n;throw new Cn(f,l)}let c=new Promise((f,l)=>{o=()=>{let{abortMessage:h,abortCode:y}=n;l(new Cn(h,y))}});u=await Promise.race([c,i.next()]),o=null}catch(c){t.removeEventListener("abort",a);let f=c.type==="aborted"&&t.aborted;if(f&&n.onAbort!=null&&await n.onAbort(e),typeof i.return=="function")try{let l=i.return();l instanceof Promise&&l.catch(h=>{n.onReturnError!=null&&n.onReturnError(h)})}catch(l){n.onReturnError!=null&&n.onReturnError(l)}if(f&&n.returnOnAbort===!0)return;throw c}if(u.done===!0)break;yield u.value}t.removeEventListener("abort",a)}return s()}var Ih=ze("libp2p-pubsub:peer-streams"),vi=class extends Pr{constructor(t){super(),this.id=t.id,this.protocol=t.protocol,this._inboundAbortController=new AbortController,this.closed=!1}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(t){if(this.outboundStream==null){let r=this.id.toString();throw new Error("No writable connection to "+r)}this.outboundStream.push(t instanceof Uint8Array?new Jt(t):t)}attachInboundStream(t){return this._rawInboundStream=t,this.inboundStream=l0(dn(this._rawInboundStream,An()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new Re("stream:inbound")),this.inboundStream}async attachOutboundStream(t){let r=this.outboundStream;return this.outboundStream!=null&&await this.outboundStream.end(),this._rawOutboundStream=t,this.outboundStream=Kr({objectMode:!0,onEnd:n=>{this._rawOutboundStream!=null&&this._rawOutboundStream.reset!=null&&this._rawOutboundStream.reset(),this._rawOutboundStream=void 0,this.outboundStream=void 0,n!=null&&this.dispatchEvent(new Re("close"))}}),dn(this.outboundStream,xi(),this._rawOutboundStream).catch(n=>{Ih.error(n)}),r==null&&this.dispatchEvent(new Re("stream:outbound")),this.outboundStream}close(){this.closed||(this.closed=!0,this.outboundStream!=null&&this.outboundStream.end(),this.inboundStream!=null&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new Re("close")))}};var dt={get(e=globalThis){let t=e.crypto;if(t==null||t.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var h0={SHA1:20,SHA256:32,SHA512:64};var Th={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},Rh=async(e,t)=>{let r=await dt.get().subtle.sign({name:"HMAC"},e,t);return new Uint8Array(r,0,r.byteLength)};async function p0(e,t){let r=Th[e],n=await dt.get().subtle.importKey("raw",t,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return await Rh(n,i)},length:h0[e]}}var G2=M(Bi(),1),Mh=M(X(),1);function xt(e,t="utf8"){let r=ni[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ir(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}var Oh=M(Nt(),1);var $n={};wt($n,{generateEphemeralKeyPair:()=>_c,generateKeyPair:()=>yg,generateKeyPairFromSeed:()=>gg,importKey:()=>bg,keyStretcher:()=>wc,keysPBM:()=>qr,marshalPrivateKey:()=>vg,marshalPublicKey:()=>xg,supportedKeys:()=>Ae,unmarshalPrivateKey:()=>Cf,unmarshalPublicKey:()=>mg});var qr={};wt(qr,{KeyType:()=>tt,PrivateKey:()=>ce,PublicKey:()=>ue});var wo=M(ho(),1),yu=M(au(),1),So=M(bo(),1),gu=M(du(),1),mu=M(hr(),1);function Zh(){mu.default._configure(),wo.default._configure(yu.default),So.default._configure(gu.default)}Zh();var xu=["uint64","int64","sint64","fixed64","sfixed64"];function Xh(e){for(let t of xu){if(e[t]==null)continue;let r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function Eo(e){return Xh(new wo.default(e))}function Jh(e){for(let t of xu){if(e[t]==null)continue;let r=e[t];e[t]=function(n){return r.call(this,n.toString())}}return e}function Bo(){return Jh(So.default.create())}function Ot(e,t){let r=Eo(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function Vt(e,t){let r=Bo();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Vr;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Vr||(Vr={}));function Ti(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Ao(e){function t(i){if(e[i.toString()]==null)throw new Error("Invalid enum value");return e[i]}let r=function(s,o){let a=t(s);o.int32(a)},n=function(s){let o=s.int32();return t(o)};return Ti("enum",Vr.VARINT,r,n)}function qt(e,t){return Ti("message",Vr.LENGTH_DELIMITED,e,t)}var tt;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"})(tt||(tt={}));var Co;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"})(Co||(Co={}));(function(e){e.codec=()=>Ao(Co)})(tt||(tt={}));var ue;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),tt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=tt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(ue||(ue={}));var ce;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),tt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=tt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(ce||(ce={}));var $x=M(kn(),1),Zx=M(vc(),1),es=M(X(),1),rs=M(Nt(),1);var Mo=M(Nt(),1);var bc={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,keySize:32}};async function wc(e,t,r){let n=bc[e];if(n==null){let w=Object.keys(bc).join(" / ");throw(0,Mo.default)(new Error(`unknown cipher type '${e}'. Must be ${w}`),"ERR_INVALID_CIPHER_TYPE")}if(t==null)throw(0,Mo.default)(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,s=n.ivSize,o=20,a=xt("key expansion"),u=2*(s+i+o),c=await p0(t,r),f=await c.digest(a),l=[],h=0;for(;h<u;){let w=await c.digest(Dt([f,a])),A=w.length;h+A>u&&(A=u-h),l.push(w),h+=A,f=await c.digest(f)}let y=u/2,p=Dt(l),d=p.subarray(0,y),x=p.subarray(y,u),v=w=>({iv:w.subarray(0,s),cipherKey:w.subarray(s,s+i),macKey:w.subarray(s+i)});return{k1:v(d),k2:v(x)}}var Wr=M(Nt(),1);var Zm=M(yt(),1),Xm=M(Fi(),1),Sc=M(X(),1);function le(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Dt([new Uint8Array(t-r.length),r])}return ht(r,"base64url")}function Zt(e){let t=zi(e);return new Sc.default.jsbn.BigInteger(ht(t,"base16"),16)}function zi(e,t){let r=xt(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Dt([new Uint8Array(t-r.length),r])}return r}var Ec={"P-256":256,"P-384":384,"P-521":521},gy=Object.keys(Ec),Fo=gy.join(" / ");async function Bc(e){if(e!=="P-256"&&e!=="P-384"&&e!=="P-521")throw(0,Wr.default)(new Error(`Unknown curve: ${e}. Must be ${Fo}`),"ERR_INVALID_CURVE");let t=await dt.get().subtle.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"]),r=async(s,o)=>{let a;o!=null?a=await dt.get().subtle.importKey("jwk",xy(e,o),{name:"ECDH",namedCurve:e},!1,["deriveBits"]):a=t.privateKey;let u=await dt.get().subtle.importKey("jwk",Cc(e,s),{name:"ECDH",namedCurve:e},!1,[]),c=await dt.get().subtle.deriveBits({name:"ECDH",namedCurve:e,public:u},a,Ec[e]);return new Uint8Array(c,0,c.byteLength)},n=await dt.get().subtle.exportKey("jwk",t.publicKey);return{key:my(n),genSharedKey:r}}var Ac={"P-256":32,"P-384":48,"P-521":66};function my(e){if(e.crv==null||e.x==null||e.y==null)throw(0,Wr.default)(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");if(e.crv!=="P-256"&&e.crv!=="P-384"&&e.crv!=="P-521")throw(0,Wr.default)(new Error(`Unknown curve: ${e.crv}. Must be ${Fo}`),"ERR_INVALID_CURVE");let t=Ac[e.crv];return Dt([Uint8Array.from([4]),zi(e.x,t),zi(e.y,t)],1+t*2)}function Cc(e,t){if(e!=="P-256"&&e!=="P-384"&&e!=="P-521")throw(0,Wr.default)(new Error(`Unknown curve: ${e}. Must be ${Fo}`),"ERR_INVALID_CURVE");let r=Ac[e];if(!Lt(t.subarray(0,1),Uint8Array.from([4])))throw(0,Wr.default)(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:e,x:ht(t.subarray(1,r+1),"base64url"),y:ht(t.subarray(1+r),"base64url"),ext:!0}}var xy=(e,t)=>({...Cc(e,t.public),d:ht(t.private,"base64url")});var _c=Bc;function Hi(e){let t=e?.algorithm??"AES-GCM",r=e?.keyLength??16,n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,o=e?.iterations??32767,a=dt.get();r*=8;async function u(l,h){let y=a.getRandomValues(new Uint8Array(s)),p=a.getRandomValues(new Uint8Array(n)),d={name:t,iv:p};typeof h=="string"&&(h=xt(h));let x={name:"PBKDF2",salt:y,iterations:o,hash:{name:i}},v=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),w=await a.subtle.deriveKey(x,v,{name:t,length:r},!0,["encrypt"]),A=await a.subtle.encrypt(d,w,l);return Dt([y,d.iv,new Uint8Array(A)])}async function c(l,h){let y=l.subarray(0,s),p=l.subarray(s,s+n),d=l.subarray(s+n),x={name:t,iv:p};typeof h=="string"&&(h=xt(h));let v={name:"PBKDF2",salt:y,iterations:o,hash:{name:i}},w=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),A=await a.subtle.deriveKey(v,w,{name:t,length:r},!0,["decrypt"]),D=await a.subtle.decrypt(x,A,d);return new Uint8Array(D)}return{encrypt:u,decrypt:c}}async function Tc(e,t){let r=nr.decode(e);return await Hi().decrypt(r,t)}var Xo={};wt(Xo,{RsaPrivateKey:()=>tn,RsaPublicKey:()=>Vn,fromJwk:()=>zy,generateKeyPair:()=>Hy,unmarshalRsaPrivateKey:()=>Vy,unmarshalRsaPublicKey:()=>qy});var Zo=M(Nt(),1);var Ux=M(Lc(),1),On=M(X(),1);var by=M(zr(),1);var H=BigInt(0),nt=BigInt(1),Je=BigInt(2),Kn=BigInt(3),wy=BigInt(8),ot=Object.freeze({a:H,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:nt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});function Pc(e){let{a:t,b:r}=ot,n=R(e*e),i=R(n*e);return R(i+t*e+r)}var Gi=ot.a===H,Qi=class extends Error{constructor(t){super(t)}},$=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof J))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new $(t.x,t.y,nt)}static toAffineBatch(t){let r=Cy(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return $.toAffineBatch(t).map($.fromAffine)}equals(t){if(!(t instanceof $))throw new TypeError("JacobianPoint expected");let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t,u=R(i*i),c=R(a*a),f=R(r*c),l=R(s*u),h=R(R(n*a)*c),y=R(R(o*i)*u);return f===l&&h===y}negate(){return new $(this.x,R(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=R(t*t),s=R(r*r),o=R(s*s),a=t+s,u=R(Je*(R(a*a)-i-o)),c=R(Kn*i),f=R(c*c),l=R(f-Je*u),h=R(c*(u-l)-wy*o),y=R(Je*r*n);return new $(l,h,y)}add(t){if(!(t instanceof $))throw new TypeError("JacobianPoint expected");let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t;if(s===H||o===H)return this;if(r===H||n===H)return t;let u=R(i*i),c=R(a*a),f=R(r*c),l=R(s*u),h=R(R(n*a)*c),y=R(R(o*i)*u),p=R(l-f),d=R(y-h);if(p===H)return d===H?this.double():$.ZERO;let x=R(p*p),v=R(p*x),w=R(f*x),A=R(d*d-v-Je*w),D=R(d*(w-A)-h*v),I=R(i*a*p);return new $(A,D,I)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=$.ZERO;if(typeof t=="bigint"&&t===H)return r;let n=Mc(t);if(n===nt)return this;if(!Gi){let l=r,h=this;for(;n>H;)n&nt&&(l=l.add(h)),h=h.double(),n>>=nt;return l}let{k1neg:i,k1:s,k2neg:o,k2:a}=Oc(n),u=r,c=r,f=this;for(;s>H||a>H;)s&nt&&(u=u.add(f)),a&nt&&(c=c.add(f)),f=f.double(),s>>=nt,a>>=nt;return i&&(u=u.negate()),o&&(c=c.negate()),c=new $(R(c.x*ot.beta),c.y,c.z),u.add(c)}precomputeWindow(t){let r=Gi?128/t+1:256/t+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(t-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals($.BASE)&&(r=J.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&zo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=$.normalizeZ(i),zo.set(r,i)));let s=$.ZERO,o=$.ZERO,a=1+(Gi?128/n:256/n),u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<a;h++){let y=h*u,p=Number(t&c);if(t>>=l,p>u&&(p-=f,t+=nt),p===0){let d=i[y];h%2&&(d=d.negate()),o=o.add(d)}else{let d=i[y+Math.abs(p)-1];p<0&&(d=d.negate()),s=s.add(d)}}return{p:s,f:o}}multiply(t,r){let n=Mc(t),i,s;if(Gi){let{k1neg:o,k1:a,k2neg:u,k2:c}=Oc(n),{p:f,f:l}=this.wNAF(a,r),{p:h,f:y}=this.wNAF(c,r);o&&(f=f.negate()),u&&(h=h.negate()),h=new $(R(h.x*ot.beta),h.y,h.z),i=f.add(h),s=l.add(y)}else{let{p:o,f:a}=this.wNAF(n,r);i=o,s=a}return $.normalizeZ([i,s])[0]}toAffine(t=Jr(this.z)){let{x:r,y:n,z:i}=this,s=t,o=R(s*s),a=R(o*s),u=R(r*o),c=R(n*a);if(R(i*s)!==nt)throw new Error("invZ was invalid");return new J(u,c)}};$.BASE=new $(ot.Gx,ot.Gy,nt);$.ZERO=new $(H,nt,H);var zo=new WeakMap,J=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,zo.delete(this)}hasEvenY(){return this.y%Je===H}static fromCompressedHex(t){let r=t.length===32,n=Pe(r?t:t.subarray(1));if(!qo(n))throw new Error("Point is not on curve");let i=Pc(n),s=Ay(i),o=(s&nt)===nt;r?o&&(s=R(-s)):(t[0]&1)===1!==o&&(s=R(-s));let a=new J(n,s);return a.assertValidity(),a}static fromUncompressedHex(t){let r=Pe(t.subarray(1,33)),n=Pe(t.subarray(33,65)),i=new J(r,n);return i.assertValidity(),i}static fromHex(t){let r=Xr(t),n=r.length,i=r[0];if(n===32||n===33&&(i===2||i===3))return this.fromCompressedHex(r);if(n===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return J.BASE.multiply($i(t))}static fromSignature(t,r,n){t=Xr(t);let i=Vc(t),{r:s,s:o}=qc(r);if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid recovery bit");let a=n&1?"03":"02",u=J.fromHex(a+Yr(s)),{n:c}=ot,f=Jr(s,c),l=R(-i*f,c),h=R(o*f,c),y=J.BASE.multiplyAndAddUnsafe(u,l,h);if(!y)throw new Error("Cannot recover signature: point at infinify");return y.assertValidity(),y}toRawBytes(t=!1){return vr(this.toHex(t))}toHex(t=!1){let r=Yr(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Yr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!qo(r)||!qo(n))throw new Error(t);let i=R(n*n),s=Pc(r);if(R(i-s)!==H)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new J(this.x,R(-this.y))}double(){return $.fromAffine(this).double().toAffine()}add(t){return $.fromAffine(this).add($.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return $.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=$.fromAffine(this),s=r===H||r===nt||this!==J.BASE?i.multiplyUnsafe(r):i.multiply(r),o=$.fromAffine(t).multiplyUnsafe(n),a=s.add(o);return a.equals($.ZERO)?void 0:a.toAffine()}};J.BASE=new J(ot.Gx,ot.Gy);J.ZERO=new J(H,H);function Uc(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Kc(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${Zr(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Pe(r),left:e.subarray(t+2)}}function Sy(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${Zr(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=Kc(e.subarray(2)),{data:n,left:i}=Kc(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Zr(i)}`);return{r:t,s:n}}var Ee=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Zr(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new Ee(Yi(i.slice(0,64)),Yi(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=Sy(r?t:vr(t));return new Ee(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Fn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Fn(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=ot.n>>nt;return this.s>t}normalizeS(){return this.hasHighS()?new Ee(this.r,ot.n-this.s):this}toDERRawBytes(t=!1){return vr(this.toDERHex(t))}toDERHex(t=!1){let r=Uc(Un(this.s));if(t)return r;let n=Uc(Un(this.r)),i=Un(n.length/2),s=Un(r.length/2);return`30${Un(n.length/2+r.length/2+4)}02${i}${n}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return vr(this.toCompactHex())}toCompactHex(){return Yr(this.r)+Yr(this.s)}};function Qr(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var Ey=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Zr(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=Ey[e[r]];return t}var By=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Yr(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(H<=e&&e<By))throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function Ho(e){let t=vr(Yr(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Un(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Yi(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function vr(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Pe(e){return Yi(Zr(e))}function Xr(e){return e instanceof Uint8Array?Uint8Array.from(e):vr(e)}function Mc(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Fn(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(e,t=ot.P){let r=e%t;return r>=H?r:t+r}function re(e,t){let{P:r}=ot,n=e;for(;t-- >H;)n*=n,n%=r;return n}function Ay(e){let{P:t}=ot,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),u=e*e*e%t,c=u*u*e%t,f=re(c,Kn)*c%t,l=re(f,Kn)*c%t,h=re(l,Je)*u%t,y=re(h,n)*h%t,p=re(y,i)*y%t,d=re(p,o)*p%t,x=re(d,a)*d%t,v=re(x,o)*p%t,w=re(v,Kn)*c%t,A=re(w,s)*y%t,D=re(A,r)*u%t;return re(D,Je)}function Jr(e,t=ot.P){if(e===H||t<=H)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=R(e,t),n=t,i=H,s=nt,o=nt,a=H;for(;r!==H;){let c=n/r,f=n%r,l=i-o*c,h=s-a*c;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==nt)throw new Error("invert: does not exist");return R(i,t)}function Cy(e,t=ot.P){let r=new Array(e.length),n=e.reduce((s,o,a)=>o===H?s:(r[a]=s,R(s*o,t)),nt),i=Jr(n,t);return e.reduceRight((s,o,a)=>o===H?s:(r[a]=R(s*r[a],t),R(s*o,t)),i),r}var Fc=(e,t)=>(e+t/Je)/t,_y={a1:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1:-nt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2:BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),POW_2_128:BigInt("0x100000000000000000000000000000000")};function Oc(e){let{n:t}=ot,{a1:r,b1:n,a2:i,b2:s,POW_2_128:o}=_y,a=Fc(s*e,t),u=Fc(-n*e,t),c=R(e-a*r-u*i,t),f=R(-a*n-u*s,t),l=c>o,h=f>o;if(l&&(c=t-c),h&&(f=t-f),c>o||f>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:h,k2:f}}function Vc(e){let{n:t}=ot,n=e.length*8-256,i=Pe(e);return n>0&&(i=i>>BigInt(n)),i>=t&&(i-=t),i}var $r,Mn,Go=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return he.hmacSha256(this.k,...t)}hmacSync(...t){return Mn(this.k,...t)}checkSync(){if(typeof Mn!="function")throw new Qi("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.checkSync(),this.incr(),this.v=this.hmacSync(this.v),this.v}};function Fn(e){return H<e&&e<ot.n}function qo(e){return H<e&&e<ot.P}function Iy(e,t,r){let n=Pe(e);if(!Fn(n))return;let{n:i}=ot,s=J.BASE.multiply(n),o=R(s.x,i);if(o===H)return;let a=R(Jr(n,i)*R(t+r*o,i),i);if(a===H)return;let u=new Ee(o,a),c=(s.x===u.r?0:2)|Number(s.y&nt);return{sig:u,recovery:c}}function $i(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");t=Yi(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");t=Pe(e)}else throw new TypeError("Expected valid private key");if(!Fn(t))throw new Error("Expected private key: 0 < key < n");return t}function Ty(e){return e instanceof J?(e.assertValidity(),e):J.fromHex(e)}function qc(e){if(e instanceof Ee)return e.assertValidity(),e;try{return Ee.fromDER(e)}catch{return Ee.fromCompact(e)}}function Wo(e,t=!1){return J.fromPrivateKey(e).toRawBytes(t)}function zc(e){let t=e.length>32?e.slice(0,32):e;return Pe(t)}function Ry(e){let t=zc(e),r=R(t,ot.n);return Hc(r<H?t:r)}function Hc(e){return Ho(e)}function Ny(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=Xr(e),i=$i(t),s=[Hc(i),Ry(n)];if(r!=null){r===!0&&(r=he.randomBytes(32));let u=Xr(r);if(u.length!==32)throw new Error("sign: Expected 32 bytes of extra data");s.push(u)}let o=Qr(...s),a=zc(n);return{seed:o,m:a,d:i}}function ky(e,t){let{sig:r,recovery:n}=e,{canonical:i,der:s,recovered:o}=Object.assign({canonical:!0,der:!0},t);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);let a=s?r.toDERRawBytes():r.toCompactRawBytes();return o?[a,n]:a}async function Gc(e,t,r={}){let{seed:n,m:i,d:s}=Ny(e,t,r.extraEntropy),o,a=new Go;for(await a.reseed(n);!(o=Iy(await a.generate(),i,s));)await a.reseed();return ky(o,r)}var Dy={strict:!0};function Wc(e,t,r,n=Dy){let i;try{i=qc(e),t=Xr(t)}catch{return!1}let{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;let a=Vc(t),u;try{u=Ty(r)}catch{return!1}let{n:c}=ot,f=Jr(o,c),l=R(a*f,c),h=R(s*f,c),y=J.BASE.multiplyAndAddUnsafe(u,l,h);return y?R(y.x,c)===s:!1}J.BASE._setWindowSize(8);var Xt={node:by,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Wi={},he={bytesToHex:Zr,hexToBytes:vr,concatBytes:Qr,mod:R,invert:Jr,isValidPrivateKey(e){try{return $i(e),!0}catch{return!1}},_bigintTo32Bytes:Ho,_normalizePrivateKey:$i,hashToPrivateKey:e=>{if(e=Xr(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");let t=R(Pe(e),ot.n-nt)+nt;return Ho(t)},randomBytes:(e=32)=>{if(Xt.web)return Xt.web.getRandomValues(new Uint8Array(e));if(Xt.node){let{randomBytes:t}=Xt.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>he.hashToPrivateKey(he.randomBytes(40)),sha256:async(...e)=>{if(Xt.web){let t=await Xt.web.subtle.digest("SHA-256",Qr(...e));return new Uint8Array(t)}else if(Xt.node){let{createHash:t}=Xt.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(Xt.web){let r=await Xt.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Qr(...t),i=await Xt.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Xt.node){let{createHmac:r}=Xt.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=Wi[e];if(r===void 0){let n=await he.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Qr(n,n),Wi[e]=r}return he.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof $r!="function")throw new Qi("sha256Sync is undefined, you need to set it");let r=Wi[e];if(r===void 0){let n=$r(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Qr(n,n),Wi[e]=r}return $r(r,...t)},precompute(e=8,t=J.BASE){let r=t===J.BASE?t:new J(t.x,t.y);return r._setWindowSize(e),r.multiply(Kn),r}};Object.defineProperties(he,{sha256Sync:{configurable:!1,get(){return $r},set(e){$r||($r=e)}},hmacSha256Sync:{configurable:!1,get(){return Mn},set(e){Mn||(Mn=e)}}});var Qc=M(Nt(),1);function br(e){if(isNaN(e)||e<=0)throw(0,Qc.default)(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return he.randomBytes(e)}var wr={};wt(wr,{jwkToPkcs1:()=>Uy,jwkToPkix:()=>My,pkcs1ToJwk:()=>Py,pkixToJwk:()=>Ky});var xx=M(kn(),1),vx=M(qi(),1),Ue=M(X(),1);var Qo=M(Nt(),1);function Py(e){let t=Ue.default.asn1.fromDer(ht(e,"ascii")),r=Ue.default.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:le(r.n),e:le(r.e),d:le(r.d),p:le(r.p),q:le(r.q),dp:le(r.dP),dq:le(r.dQ),qi:le(r.qInv),alg:"RS256"}}function Uy(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw(0,Qo.default)(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let t=Ue.default.pki.privateKeyToAsn1({n:Zt(e.n),e:Zt(e.e),d:Zt(e.d),p:Zt(e.p),q:Zt(e.q),dP:Zt(e.dp),dQ:Zt(e.dq),qInv:Zt(e.qi)});return xt(Ue.default.asn1.toDer(t).getBytes(),"ascii")}function Ky(e){let t=Ue.default.asn1.fromDer(ht(e,"ascii")),r=Ue.default.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:le(r.n),e:le(r.e)}}function My(e){if(e.n==null||e.e==null)throw(0,Qo.default)(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let t=Ue.default.pki.publicKeyToAsn1({n:Zt(e.n),e:Zt(e.e)});return xt(Ue.default.asn1.toDer(t).getBytes(),"ascii")}var Ex=M(qi(),1),Yo=M(X(),1);function Yc(e,t){return t.map(r=>Zt(e[r]))}function $c(e){return Yo.default.pki.setRsaPrivateKey(...Yc(e,["n","e","d","p","q","dp","dq","qi"]))}function Zc(e){return Yo.default.pki.setRsaPublicKey(...Yc(e,["n","e"]))}var Xc=M(Nt(),1);async function Jc(e){let t=await dt.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await ef(t);return{privateKey:r[0],publicKey:r[1]}}async function $o(e){let r=[await dt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Fy(e)],n=await ef({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function jc(e,t){let r=await dt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await dt.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}async function tf(e,t,r){let n=await dt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await dt.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}async function ef(e){if(e.privateKey==null||e.publicKey==null)throw(0,Xc.default)(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([dt.get().subtle.exportKey("jwk",e.privateKey),dt.get().subtle.exportKey("jwk",e.publicKey)])}async function Fy(e){return await dt.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function rf(e,t,r,n){let i=t?Zc(e):$c(e),s=ht(Uint8Array.from(r),"ascii"),o=n(s,i);return xt(o,"ascii")}function nf(e,t){return rf(e,!0,t,(r,n)=>n.encrypt(r))}function sf(e,t){return rf(e,!1,t,(r,n)=>n.decrypt(r))}async function jr(e,t){let n=await Hi().encrypt(e,t);return nr.encode(n)}var Vn=class{constructor(t){this._key=t}async verify(t,r){return await tf(this._key,r,t)}marshal(){return wr.jwkToPkix(this._key)}get bytes(){return ue.encode({Type:tt.RSA,Data:this.marshal()}).subarray()}encrypt(t){return nf(this._key,t)}equals(t){return Lt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await St.digest(this.bytes);return t}},tn=class{constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return br(16)}async sign(t){return await jc(this._key,t)}get public(){if(this._publicKey==null)throw(0,Zo.default)(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Vn(this._publicKey)}decrypt(t){return sf(this._key,t)}marshal(){return wr.jwkToPkcs1(this._key)}get bytes(){return ce.encode({Type:tt.RSA,Data:this.marshal()}).subarray()}equals(t){return Lt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await St.digest(this.bytes);return t}async id(){let t=await this.public.hash();return ht(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new On.default.util.ByteBuffer(this.marshal()),i=On.default.asn1.fromDer(n),s=On.default.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return On.default.pki.encryptRsaPrivateKey(s,t,o)}else{if(r==="libp2p-key")return await jr(this.bytes,t);throw(0,Zo.default)(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function Vy(e){let t=wr.pkcs1ToJwk(e),r=await $o(t);return new tn(r.privateKey,r.publicKey)}function qy(e){let t=wr.pkixToJwk(e);return new Vn(t)}async function zy(e){let t=await $o(e);return new tn(t.privateKey,t.publicKey)}async function Hy(e){let t=await Jc(e);return new tn(t.privateKey,t.publicKey)}var ua={};wt(ua,{Ed25519PrivateKey:()=>Er,Ed25519PublicKey:()=>Wn,generateKeyPair:()=>fg,generateKeyPairFromSeed:()=>aa,unmarshalEd25519PrivateKey:()=>ug,unmarshalEd25519PublicKey:()=>cg});var oa=M(Nt(),1);var Gy=M(zr(),1);var It=BigInt(0),W=BigInt(1),en=BigInt(2),of=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),at=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:of,n:of,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var ff=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),qn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Mx=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),Wy=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Qy=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Yy=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),$y=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),G=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof ft))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(ft.ZERO)?G.ZERO:new G(t.x,t.y,W,E(t.x*t.y))}static toAffineBatch(t){let r=Jy(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){af(t);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t,u=E(r*a),c=E(s*i),f=E(n*a),l=E(o*i);return u===c&&f===l}negate(){return new G(E(-this.x),this.y,this.z,E(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=at,s=E(t*t),o=E(r*r),a=E(en*E(n*n)),u=E(i*s),c=t+r,f=E(E(c*c)-s-o),l=u+o,h=l-a,y=u-o,p=E(f*h),d=E(l*y),x=E(f*y),v=E(h*l);return new G(p,d,v,x)}add(t){af(t);let{x:r,y:n,z:i,t:s}=this,{x:o,y:a,z:u,t:c}=t,f=E((n-r)*(a+o)),l=E((n+r)*(a-o)),h=E(l-f);if(h===It)return this.double();let y=E(i*en*c),p=E(s*en*u),d=p+y,x=l+f,v=p-y,w=E(d*h),A=E(x*v),D=E(d*v),I=E(h*x);return new G(w,A,I,D)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(t-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals(G.BASE)&&(r=ft.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&ra.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=G.normalizeZ(i),ra.set(r,i)));let s=G.ZERO,o=G.ZERO,a=1+256/n,u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<a;h++){let y=h*u,p=Number(t&c);if(t>>=l,p>u&&(p-=f,t+=W),p===0){let d=i[y];h%2&&(d=d.negate()),o=o.add(d)}else{let d=i[y+Math.abs(p)-1];p<0&&(d=d.negate()),s=s.add(d)}}return G.normalizeZ([s,o])[0]}multiply(t,r){return this.wNAF(Xi(t,at.l),r)}multiplyUnsafe(t){let r=Xi(t,at.l,!1),n=G.BASE,i=G.ZERO;if(r===It)return i;if(this.equals(i)||r===W)return this;if(this.equals(n))return this.wNAF(r);let s=i,o=this;for(;r>It;)r&W&&(s=s.add(o)),o=o.double(),r>>=W;return s}isSmallOrder(){return this.multiplyUnsafe(at.h).equals(G.ZERO)}isTorsionFree(){return this.multiplyUnsafe(at.l).equals(G.ZERO)}toAffine(t=Ji(this.z)){let{x:r,y:n,z:i}=this,s=E(r*t),o=E(n*t);if(E(i*t)!==W)throw new Error("invZ was invalid");return new ft(s,o)}fromRistrettoBytes(){jo()}toRistrettoBytes(){jo()}fromRistrettoHash(){jo()}};G.BASE=new G(at.Gx,at.Gy,W,E(at.Gx*at.Gy));G.ZERO=new G(It,W,W,It);function af(e){if(!(e instanceof G))throw new TypeError("ExtendedPoint expected")}function Jo(e){if(!(e instanceof Ht))throw new TypeError("RistrettoPoint expected")}function jo(){throw new Error("Legacy method: switch to RistrettoPoint")}var Ht=class{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=at,n=E(qn*t*t),i=E((n+W)*Yy),s=BigInt(-1),o=E((s-r*n)*E(n+r)),{isValid:a,value:u}=ia(i,o),c=E(u*t);tr(c)||(c=E(-c)),a||(u=c),a||(s=n);let f=E(s*(n-W)*$y-o),l=u*u,h=E((u+u)*o),y=E(f*Wy),p=E(W-l),d=E(W+l);return new G(E(h*d),E(p*y),E(y*d),E(h*p))}static hashToCurve(t){t=er(t,64);let r=ta(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=ta(t.slice(32,64)),s=this.calcElligatorRistrettoMap(i);return new Ht(n.add(s))}static fromHex(t){t=er(t,32);let{a:r,d:n}=at,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=ta(t);if(!tg(zn(s),t)||tr(s))throw new Error(i);let o=E(s*s),a=E(W+r*o),u=E(W-r*o),c=E(a*a),f=E(u*u),l=E(r*n*c-f),{isValid:h,value:y}=cf(E(l*f)),p=E(y*u),d=E(y*p*l),x=E((s+s)*p);tr(x)&&(x=E(-x));let v=E(a*d),w=E(x*v);if(!h||tr(w)||v===It)throw new Error(i);return new Ht(new G(x,v,W,w))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,s=E(E(n+r)*E(n-r)),o=E(t*r),a=E(o*o),{value:u}=cf(E(s*a)),c=E(u*s),f=E(u*o),l=E(c*f*i),h;if(tr(i*l)){let p=E(r*qn),d=E(t*qn);t=p,r=d,h=E(c*Qy)}else h=f;tr(t*l)&&(r=E(-r));let y=E((n-r)*h);return tr(y)&&(y=E(-y)),zn(y)}toHex(){return Hn(this.toRawBytes())}toString(){return this.toHex()}equals(t){Jo(t);let r=this.ep,n=t.ep,i=E(r.x*n.y)===E(r.y*n.x),s=E(r.y*n.y)===E(r.x*n.x);return i||s}add(t){return Jo(t),new Ht(this.ep.add(t.ep))}subtract(t){return Jo(t),new Ht(this.ep.subtract(t.ep))}multiply(t){return new Ht(this.ep.multiply(t))}multiplyUnsafe(t){return new Ht(this.ep.multiplyUnsafe(t))}};Ht.BASE=new Ht(G.BASE);Ht.ZERO=new Ht(G.ZERO);var ra=new WeakMap,ft=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,ra.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=at;t=er(t,32);let s=t.slice();s[31]=t[31]&-129;let o=Gn(s);if(r&&o>=i)throw new Error("Expected 0 < hex < P");if(!r&&o>=ff)throw new Error("Expected 0 < hex < 2**256");let a=E(o*o),u=E(a-W),c=E(n*a+W),{isValid:f,value:l}=ia(u,c);if(!f)throw new Error("Point.fromHex: invalid y coordinate");let h=(l&W)===W;return(t[31]&128)!==0!==h&&(l=E(-l)),new ft(l,o)}static async fromPrivateKey(t){return(await ji(t)).point}toRawBytes(){let t=zn(this.y);return t[31]|=this.x&W?128:0,t}toHex(){return Hn(this.toRawBytes())}toX25519(){let{y:t}=this,r=E((W+t)*Ji(W-t));return zn(r)}isTorsionFree(){return G.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ft(E(-this.x),this.y)}add(t){return G.fromAffine(this).add(G.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return G.fromAffine(this).multiply(t,this).toAffine()}};ft.BASE=new ft(at.Gx,at.Gy);ft.ZERO=new ft(It,W);var Sr=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=er(t,64),n=ft.fromHex(r.slice(0,32),!1),i=Gn(r.slice(32,64));return new Sr(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof ft))throw new Error("Expected Point instance");return Xi(r,at.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(zn(this.s),32),t}toHex(){return Hn(this.toRawBytes())}};function uf(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var Zy=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hn(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Zy[e[r]];return t}function na(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function lf(e){let r=e.toString(16).padStart(64,"0");return na(r)}function zn(e){return lf(e).reverse()}function tr(e){return(E(e)&W)===W}function Gn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Hn(Uint8Array.from(e).reverse()))}var Xy=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function ta(e){return E(Gn(e)&Xy)}function E(e,t=at.P){let r=e%t;return r>=It?r:t+r}function Ji(e,t=at.P){if(e===It||t<=It)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=E(e,t),n=t,i=It,s=W,o=W,a=It;for(;r!==It;){let c=n/r,f=n%r,l=i-o*c,h=s-a*c;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==W)throw new Error("invert: does not exist");return E(i,t)}function Jy(e,t=at.P){let r=new Array(e.length),n=e.reduce((s,o,a)=>o===It?s:(r[a]=s,E(s*o,t)),W),i=Ji(n,t);return e.reduceRight((s,o,a)=>o===It?s:(r[a]=E(s*r[a],t),E(s*o,t)),i),r}function Be(e,t){let{P:r}=at,n=e;for(;t-- >It;)n*=n,n%=r;return n}function jy(e){let{P:t}=at,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),u=e*e%t*e%t,c=Be(u,en)*u%t,f=Be(c,W)*e%t,l=Be(f,r)*f%t,h=Be(l,n)*l%t,y=Be(h,i)*h%t,p=Be(y,s)*y%t,d=Be(p,o)*p%t,x=Be(d,o)*p%t,v=Be(x,n)*l%t;return{pow_p_5_8:Be(v,en)*e%t,b2:u}}function ia(e,t){let r=E(t*t*t),n=E(r*r*t),i=jy(e*n).pow_p_5_8,s=E(e*r*i),o=E(t*s*s),a=s,u=E(s*qn),c=o===e,f=o===E(-e),l=o===E(-e*qn);return c&&(s=a),(f||l)&&(s=u),tr(s)&&(s=E(-s)),{isValid:c||f,value:s}}function cf(e){return ia(W,e)}function Zi(e){return E(Gn(e),at.l)}function tg(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function er(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):na(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Xi(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(It<e)return e}else if(It<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function eg(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function rg(e){if(e=typeof e=="bigint"||typeof e=="number"?lf(Xi(e,ff)):er(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function ng(e){let t=eg(e.slice(0,32)),r=e.slice(32,64),n=Zi(t),i=ft.BASE.multiply(n),s=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:s}}var ea;async function ji(e){return ng(await rr.sha512(rg(e)))}async function sa(e){return(await ji(e)).pointBytes}async function hf(e,t){e=er(e);let{prefix:r,scalar:n,pointBytes:i}=await ji(t),s=Zi(await rr.sha512(r,e)),o=ft.BASE.multiply(s),a=Zi(await rr.sha512(o.toRawBytes(),i,e)),u=E(s+a*n,at.l);return new Sr(o,u).toRawBytes()}function ig(e,t,r){t=er(t),r instanceof ft||(r=ft.fromHex(r,!1));let{r:n,s:i}=e instanceof Sr?e.assertValidity():Sr.fromHex(e),s=G.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:s,pub:r,msg:t}}function sg(e,t,r,n){let i=Zi(n),s=G.fromAffine(e).multiplyUnsafe(i);return G.fromAffine(t).add(s).subtract(r).multiplyUnsafe(at.h).equals(G.ZERO)}async function pf(e,t,r){let{r:n,SB:i,msg:s,pub:o}=ig(e,t,r),a=await rr.sha512(n.toRawBytes(),o.toRawBytes(),s);return sg(o,n,i,a)}ft.BASE._setWindowSize(8);var je={node:Gy,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},rr={bytesToHex:Hn,hexToBytes:na,concatBytes:uf,getExtendedPublicKey:ji,mod:E,invert:Ji,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=er(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return E(Gn(e),at.l-W)+W},randomBytes:(e=32)=>{if(je.web)return je.web.getRandomValues(new Uint8Array(e));if(je.node){let{randomBytes:t}=je.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>rr.randomBytes(32),sha512:async(...e)=>{let t=uf(...e);if(je.web){let r=await je.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(je.node)return Uint8Array.from(je.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=ft.BASE){let r=t.equals(ft.BASE)?t:new ft(t.x,t.y);return r._setWindowSize(e),r.multiply(en),r},sha512Sync:void 0};Object.defineProperties(rr,{sha512Sync:{configurable:!1,get(){return ea},set(e){ea||(ea=e)}}});var rn=32,Ke=64,ts=32;async function df(){let e=rr.randomPrivateKey(),t=await sa(e);return{privateKey:xf(e,t),publicKey:t}}async function yf(e){if(e.length!==ts)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await sa(t);return{privateKey:xf(t,r),publicKey:r}}async function gf(e,t){let r=e.subarray(0,ts);return await hf(t,r)}async function mf(e,t,r){return await pf(t,r,e)}function xf(e,t){let r=new Uint8Array(Ke);for(let n=0;n<ts;n++)r[n]=e[n],r[ts+n]=t[n];return r}var Wn=class{constructor(t){this._key=nn(t,rn)}async verify(t,r){return await mf(this._key,r,t)}marshal(){return this._key}get bytes(){return ue.encode({Type:tt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return Lt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await St.digest(this.bytes);return t}},Er=class{constructor(t,r){this._key=nn(t,Ke),this._publicKey=nn(r,rn)}async sign(t){return await gf(this._key,t)}get public(){return new Wn(this._publicKey)}marshal(){return this._key}get bytes(){return ce.encode({Type:tt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return Lt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await St.digest(this.bytes);return t}async id(){let t=await qe.digest(this.public.bytes);return Rt.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return await jr(this.bytes,t);throw(0,oa.default)(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function ug(e){if(e.length>Ke){e=nn(e,Ke+rn);let n=e.subarray(0,Ke),i=e.subarray(Ke,e.length);return new Er(n,i)}e=nn(e,Ke);let t=e.subarray(0,Ke),r=e.subarray(rn);return new Er(t,r)}function cg(e){return e=nn(e,rn),new Wn(e)}async function fg(){let{privateKey:e,publicKey:t}=await df();return new Er(e,t)}async function aa(e){let{privateKey:t,publicKey:r}=await yf(e);return new Er(t,r)}function nn(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw(0,oa.default)(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}var fa={};wt(fa,{Secp256k1PrivateKey:()=>Yn,Secp256k1PublicKey:()=>Qn,generateKeyPair:()=>dg,unmarshalSecp256k1PrivateKey:()=>hg,unmarshalSecp256k1PublicKey:()=>pg});var Af=M(Nt(),1);var sn=M(Nt(),1);function vf(){return he.randomPrivateKey()}async function bf(e,t){let{digest:r}=await St.digest(t);try{return await Gc(r,e)}catch(n){throw(0,sn.default)(n,"ERR_INVALID_INPUT")}}async function wf(e,t,r){try{let{digest:n}=await St.digest(r);return Wc(t,n,e)}catch(n){throw(0,sn.default)(n,"ERR_INVALID_INPUT")}}function Sf(e){return J.fromHex(e).toRawBytes(!0)}function Ef(e){try{Wo(e,!0)}catch(t){throw(0,sn.default)(t,"ERR_INVALID_PRIVATE_KEY")}}function ca(e){try{J.fromHex(e)}catch(t){throw(0,sn.default)(t,"ERR_INVALID_PUBLIC_KEY")}}function Bf(e){try{return Wo(e,!0)}catch(t){throw(0,sn.default)(t,"ERR_INVALID_PRIVATE_KEY")}}var Qn=class{constructor(t){ca(t),this._key=t}async verify(t,r){return await wf(this._key,r,t)}marshal(){return Sf(this._key)}get bytes(){return ue.encode({Type:tt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return Lt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await St.digest(this.bytes);return t}},Yn=class{constructor(t,r){this._key=t,this._publicKey=r??Bf(t),Ef(this._key),ca(this._publicKey)}async sign(t){return await bf(this._key,t)}get public(){return new Qn(this._publicKey)}marshal(){return this._key}get bytes(){return ce.encode({Type:tt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return Lt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await St.digest(this.bytes);return t}async id(){let t=await this.public.hash();return ht(t,"base58btc")}async export(t,r="libp2p-key"){if(r==="libp2p-key")return await jr(this.bytes,t);throw(0,Af.default)(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function hg(e){return new Yn(e)}function pg(e){return new Qn(e)}async function dg(){let e=await vf();return new Yn(e)}var Ae={rsa:Xo,ed25519:ua,secp256k1:fa};function la(e){let t=Object.keys(Ae).join(" / ");return(0,rs.default)(new Error(`invalid or unsupported key type ${e}. Must be ${t}`),"ERR_UNSUPPORTED_KEY_TYPE")}function ha(e){if(e=e.toLowerCase(),e==="rsa"||e==="ed25519"||e==="secp256k1")return Ae[e];throw la(e)}async function yg(e,t){return await ha(e).generateKeyPair(t??2048)}async function gg(e,t,r){if(e.toLowerCase()!=="ed25519")throw(0,rs.default)(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return await aa(t)}function mg(e){let t=ue.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case tt.RSA:return Ae.rsa.unmarshalRsaPublicKey(r);case tt.Ed25519:return Ae.ed25519.unmarshalEd25519PublicKey(r);case tt.Secp256k1:return Ae.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw la(t.Type??"RSA")}}function xg(e,t){return t=(t??"rsa").toLowerCase(),ha(t),e.bytes}async function Cf(e){let t=ce.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case tt.RSA:return await Ae.rsa.unmarshalRsaPrivateKey(r);case tt.Ed25519:return Ae.ed25519.unmarshalEd25519PrivateKey(r);case tt.Secp256k1:return Ae.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw la(t.Type??"RSA")}}function vg(e,t){return t=(t??"rsa").toLowerCase(),ha(t),e.bytes}async function bg(e,t){try{let i=await Tc(e,t);return await Cf(i)}catch{}let r=es.default.pki.decryptRsaPrivateKey(e,t);if(r===null)throw(0,rs.default)(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=es.default.asn1.toDer(es.default.pki.privateKeyToAsn1(r));return n=xt(n.getBytes(),"ascii"),await Ae.rsa.unmarshalRsaPrivateKey(n)}var wg=M(Io(),1),Sg=M(yt(),1),Eg=M(Nt(),1);var Bg=M(Nt(),1);var _f=Symbol.for("@libp2p/peer-id");var Ag=Symbol.for("nodejs.util.inspect.custom"),If=Object.values(Nr).map(e=>e.decoder).reduce((e,t)=>e.or(t),Nr.identity.decoder),Tf=114,pa=36,da=37,Zn=class{constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[_f](){return!0}toString(){return this.string==null&&(this.string=Rt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return ut.createV1(Tf,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return Lt(this.multihash.bytes,t);if(typeof t=="string")return vt(t).equals(this);if(t?.multihash?.bytes!=null)return Lt(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[Ag](){return`PeerId(${this.toString()})`}},on=class extends Zn{constructor(t){super({...t,type:"RSA"}),this.type="RSA",this.publicKey=t.publicKey}},an=class extends Zn{constructor(t){super({...t,type:"Ed25519"}),this.type="Ed25519",this.publicKey=t.multihash.digest}},un=class extends Zn{constructor(t){super({...t,type:"secp256k1"}),this.type="secp256k1",this.publicKey=t.multihash.digest}};function vt(e,t){if(t=t??If,e.charAt(0)==="1"||e.charAt(0)==="Q"){let r=hn(Rt.decode(`z${e}`));return e.startsWith("12D")?new an({multihash:r}):e.startsWith("16U")?new un({multihash:r}):new on({multihash:r})}return ya(If.decode(e))}function ya(e){try{let t=hn(e);if(t.code===qe.code){if(t.digest.length===pa)return new an({multihash:t});if(t.digest.length===da)return new un({multihash:t})}if(t.code===St.code)return new on({multihash:t})}catch{return Cg(ut.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function Cg(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==Tf)throw new Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===St.code)return new on({multihash:e.multihash});if(t.code===qe.code){if(t.digest.length===pa)return new an({multihash:e.multihash});if(t.digest.length===da)return new un({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Rf(e,t){return e.length===pa?new an({multihash:pe(qe.code,e),privateKey:t}):e.length===da?new un({multihash:pe(qe.code,e),privateKey:t}):new on({multihash:await St.digest(e),publicKey:e,privateKey:t})}var Nf=M(Nt(),1);function kf(){return BigInt(`0x${ht(br(8),"base16")}`)}var Df=(e,t)=>{let r=xt(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n},Lf=e=>St.encode(e);var Pf=function(e){return Array.isArray(e)?e:[e]},Uf=e=>{if(e.from==null)throw(0,Nf.default)(new Error("RPC message was missing from"),Et.ERR_MISSING_FROM);return e.sequenceNumber==null||e.from==null||e.signature==null||e.key==null?{type:"unsigned",topic:e.topic??"",data:e.data??new Uint8Array(0)}:{type:"signed",from:ya(e.from),topic:e.topic??"",sequenceNumber:Ig(e.sequenceNumber),data:e.data??new Uint8Array(0),signature:e.signature,key:e.key}},Xn=e=>e.type==="signed"?{from:e.from.multihash.bytes,data:e.data,sequenceNumber:_g(e.sequenceNumber),topic:e.topic,signature:e.signature,key:e.key}:{data:e.data,topic:e.topic},_g=e=>{let t=e.toString(16);return t.length%2!==0&&(t=`0${t}`),xt(t,"base16")},Ig=e=>BigInt(`0x${ht(e,"base16")}`);var Kf=xt("libp2p-pubsub:");async function Mf(e,t,r){if(e.privateKey==null)throw new Error("Cannot sign message, no private key present");if(e.publicKey==null)throw new Error("Cannot sign message, no public key present");let n={type:"signed",topic:t.topic,data:t.data,sequenceNumber:t.sequenceNumber,from:e},i=Dt([Kf,r(Xn(n)).subarray()]),s=await $n.unmarshalPrivateKey(e.privateKey);return n.signature=await s.sign(i),n.key=e.publicKey,n}async function Ff(e,t){if(e.type!=="signed")throw new Error('Message type must be "signed" to be verified');if(e.signature==null)throw new Error("Message must contain a signature to be verified");if(e.from==null)throw new Error("Message must contain a from property to be verified");let r=Dt([Kf,t({...Xn(e),signature:void 0,key:void 0}).subarray()]),n=await Tg(e);return await $n.unmarshalPublicKey(n).verify(r,e.signature)}async function Tg(e){if(e.type!=="signed")throw new Error('Message type must be "signed" to have a public key');if(e.from==null)throw new Error("Could not get the public key from the originator id");if(e.key!=null){let t=await Rf(e.key);if(t.publicKey!=null)return t.publicKey}if(e.from.publicKey!=null)return e.from.publicKey;throw new Error("Could not get the public key from the originator id")}var Jn;(function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"})(Jn||(Jn={}));function Me(e,t){let r={[Symbol.iterator]:()=>r,next:()=>{let n=e.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:t(i)}}};return r}var jn=class{constructor(t){if(this.map=new Map,t!=null)for(let[r,n]of t.entries())this.map.set(r.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(t){this.map.delete(t.toString())}entries(){return Me(this.map.entries(),t=>[vt(t[0]),t[1]])}forEach(t){this.map.forEach((r,n)=>{t(r,vt(n),this)})}get(t){return this.map.get(t.toString())}has(t){return this.map.has(t.toString())}set(t,r){this.map.set(t.toString(),r)}keys(){return Me(this.map.keys(),t=>vt(t))}values(){return this.map.values()}get size(){return this.map.size}};var Fe=class{constructor(t){if(this.set=new Set,t!=null)for(let r of t)this.set.add(r.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(t){this.set.add(t.toString())}clear(){this.set.clear()}delete(t){this.set.delete(t.toString())}entries(){return Me(this.set.entries(),t=>{let r=vt(t[0]);return[r,r]})}forEach(t){this.set.forEach(r=>{let n=vt(r);t(n,n,this)})}has(t){return this.set.has(t.toString())}values(){return Me(this.set.values(),t=>vt(t))}intersection(t){let r=new Fe;for(let n of t)this.has(n)&&r.add(n);return r}difference(t){let r=new Fe;for(let n of this)t.has(n)||r.add(n);return r}union(t){let r=new Fe;for(let n of t)r.add(n);for(let n of this)r.add(n);return r}};var cn=class{constructor(t){if(this.list=[],t!=null)for(let r of t)this.list.push(r.toString())}[Symbol.iterator](){return Me(this.list.entries(),t=>vt(t[1]))}concat(t){let r=new cn(this);for(let n of t)r.push(n);return r}entries(){return Me(this.list.entries(),t=>[t[0],vt(t[1])])}every(t){return this.list.every((r,n)=>t(vt(r),n,this))}filter(t){let r=new cn;return this.list.forEach((n,i)=>{let s=vt(n);t(s,i,this)&&r.push(s)}),r}find(t){let r=this.list.find((n,i)=>t(vt(n),i,this));if(r!=null)return vt(r)}findIndex(t){return this.list.findIndex((r,n)=>t(vt(r),n,this))}forEach(t){this.list.forEach((r,n)=>{t(vt(r),n,this)})}includes(t){return this.list.includes(t.toString())}indexOf(t){return this.list.indexOf(t.toString())}pop(){let t=this.list.pop();if(t!=null)return vt(t)}push(...t){for(let r of t)this.list.push(r.toString())}shift(){let t=this.list.shift();if(t!=null)return vt(t)}unshift(...t){let r=this.list.length;for(let n=t.length-1;n>-1;n--)r=this.list.unshift(t[n].toString());return r}get length(){return this.list.length}};var it=ze("libp2p:pubsub"),ns=class extends Pr{constructor(t,r){super();let{multicodecs:n=[],globalSignaturePolicy:i="StrictSign",canRelayMessage:s=!1,emitSelf:o=!1,messageProcessingConcurrency:a=10,maxInboundStreams:u=1,maxOutboundStreams:c=1}=r;this.components=t,this.multicodecs=Pf(n),this.enabled=r.enabled!==!1,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new jn,this.globalSignaturePolicy=i==="StrictNoSign"?"StrictNoSign":"StrictSign",this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this.queue=new En({concurrency:a}),this.maxInboundStreams=u,this.maxOutboundStreams=c,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started||!this.enabled)return;it("starting");let t=this.components.registrar;await Promise.all(this.multicodecs.map(async n=>await t.handle(n,this._onIncomingStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams})));let r=s0({onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected});this._registrarTopologyIds=await Promise.all(this.multicodecs.map(async n=>await t.register(n,r))),it("started"),this.started=!0}async stop(){if(!this.started||!this.enabled)return;let t=this.components.registrar;this._registrarTopologyIds!=null&&this._registrarTopologyIds?.map(r=>t.unregister(r)),await Promise.all(this.multicodecs.map(async r=>await t.unhandle(r))),it("stopping");for(let r of this.peers.values())r.close();this.peers.clear(),this.subscriptions=new Set,this.started=!1,it("stopped")}isStarted(){return this.started}_onIncomingStream(t){let{stream:r,connection:n}=t,i=n.remotePeer;if(r.stat.protocol==null){r.abort(new Error("Stream was not multiplexed"));return}let s=this.addPeer(i,r.stat.protocol),o=s.attachInboundStream(r);this.processMessages(i,o,s).catch(a=>it(a))}_onPeerConnected(t,r){it("connected %p",t),Promise.resolve().then(async()=>{try{let n=await r.newStream(this.multicodecs);if(n.stat.protocol==null){n.abort(new Error("Stream was not multiplexed"));return}await this.addPeer(t,n.stat.protocol).attachOutboundStream(n)}catch(n){it.error(n)}this.send(t,{subscriptions:Array.from(this.subscriptions).map(n=>n.toString()),subscribe:!0})}).catch(n=>{it.error(n)})}_onPeerDisconnected(t,r){let n=t.toString();it("connection ended",n),this._removePeer(t)}addPeer(t,r){let n=this.peers.get(t);if(n!=null)return n;it("new peer %p",t);let i=new vi({id:t,protocol:r});return this.peers.set(t,i),i.addEventListener("close",()=>this._removePeer(t),{once:!0}),i}_removePeer(t){let r=this.peers.get(t);if(r!=null){r.close(),it("delete peer %p",t),this.peers.delete(t);for(let n of this.topics.values())n.delete(t);return r}}async processMessages(t,r,n){try{await dn(r,async i=>{for await(let s of i){let o=this.decodeRpc(s),a=[];for(let u of o.messages??[]){if(u.from==null||u.data==null||u.topic==null){it("message from %p was missing from, data or topic fields, dropping",t);continue}a.push({from:u.from,data:u.data,topic:u.topic,sequenceNumber:u.sequenceNumber??void 0,signature:u.signature??void 0,key:u.key??void 0})}this.processRpc(t,n,{subscriptions:(o.subscriptions??[]).map(u=>({subscribe:Boolean(u.subscribe),topic:u.topic??""})),messages:a}).catch(u=>it(u))}})}catch(i){this._onPeerDisconnected(n.id,i)}}async processRpc(t,r,n){if(!this.acceptFrom(t))return it("received message from unacceptable peer %p",t),!1;it("rpc from %p",t);let{subscriptions:i,messages:s}=n;return i!=null&&i.length>0&&(it("subscription update from %p",t),i.forEach(o=>{this.processRpcSubOpt(t,o)}),super.dispatchEvent(new Re("subscription-change",{detail:{peerId:r.id,subscriptions:i.map(({topic:o,subscribe:a})=>({topic:`${o??""}`,subscribe:Boolean(a)}))}}))),s!=null&&s.length>0&&(it("messages from %p",t),this.queue.addAll(s.map(o=>async()=>{if(o.topic==null||!this.subscriptions.has(o.topic)&&!this.canRelayMessage)return it("received message we didn't subscribe to. Dropping."),!1;try{let a=await Uf(o);await this.processMessage(t,a)}catch(a){it.error(a)}})).catch(o=>it(o))),!0}processRpcSubOpt(t,r){let n=r.topic;if(n==null)return;let i=this.topics.get(n);i==null&&(i=new Fe,this.topics.set(n,i)),r.subscribe===!0?i.add(t):i.delete(t)}async processMessage(t,r){if(!(this.components.peerId.equals(t)&&!this.emitSelf)){try{await this.validate(t,r)}catch(n){it("Message is invalid, dropping it. %O",n);return}this.subscriptions.has(r.topic)&&(!this.components.peerId.equals(t)||this.emitSelf)&&super.dispatchEvent(new Re("message",{detail:r})),await this.publishMessage(t,r)}}getMsgId(t){switch(this.globalSignaturePolicy){case"StrictSign":if(t.type!=="signed")throw(0,Tt.default)(new Error('Message type should be "signed" when signature policy is StrictSign but it was not'),Et.ERR_MISSING_SIGNATURE);if(t.sequenceNumber==null)throw(0,Tt.default)(new Error("Need seqno when signature policy is StrictSign but it was missing"),Et.ERR_MISSING_SEQNO);if(t.key==null)throw(0,Tt.default)(new Error("Need key when signature policy is StrictSign but it was missing"),Et.ERR_MISSING_KEY);return Df(t.key,t.sequenceNumber);case"StrictNoSign":return Lf(t.data);default:throw(0,Tt.default)(new Error("Cannot get message id: unhandled signature policy"),Et.ERR_UNHANDLED_SIGNATURE_POLICY)}}acceptFrom(t){return!0}send(t,r){let{messages:n,subscriptions:i,subscribe:s}=r;return this.sendRpc(t,{subscriptions:(i??[]).map(o=>({topic:o,subscribe:Boolean(s)})),messages:(n??[]).map(Xn)})}sendRpc(t,r){let n=this.peers.get(t);if(n==null||!n.isWritable){it.error("Cannot send RPC to %p as there is no open stream to it available",t);return}n.write(this.encodeRpc(r))}async validate(t,r){switch(this.globalSignaturePolicy){case"StrictNoSign":if(r.type!=="unsigned")throw(0,Tt.default)(new Error('Message type should be "unsigned" when signature policy is StrictNoSign but it was not'),Et.ERR_MISSING_SIGNATURE);if(r.signature!=null)throw(0,Tt.default)(new Error("StrictNoSigning: signature should not be present"),Et.ERR_UNEXPECTED_SIGNATURE);if(r.key!=null)throw(0,Tt.default)(new Error("StrictNoSigning: key should not be present"),Et.ERR_UNEXPECTED_KEY);if(r.sequenceNumber!=null)throw(0,Tt.default)(new Error("StrictNoSigning: seqno should not be present"),Et.ERR_UNEXPECTED_SEQNO);break;case"StrictSign":if(r.type!=="signed")throw(0,Tt.default)(new Error('Message type should be "signed" when signature policy is StrictSign but it was not'),Et.ERR_MISSING_SIGNATURE);if(r.signature==null)throw(0,Tt.default)(new Error("StrictSigning: Signing required and no signature was present"),Et.ERR_MISSING_SIGNATURE);if(r.sequenceNumber==null)throw(0,Tt.default)(new Error("StrictSigning: Signing required and no sequenceNumber was present"),Et.ERR_MISSING_SEQNO);if(!await Ff(r,this.encodeMessage.bind(this)))throw(0,Tt.default)(new Error("StrictSigning: Invalid message signature"),Et.ERR_INVALID_SIGNATURE);break;default:throw(0,Tt.default)(new Error("Cannot validate message: unhandled signature policy"),Et.ERR_UNHANDLED_SIGNATURE_POLICY)}let i=this.topicValidators.get(r.topic);if(i!=null){let s=await i(t,r);if(s===Jn.Reject||s===Jn.Ignore)throw(0,Tt.default)(new Error("Message validation failed"),Et.ERR_TOPIC_VALIDATOR_REJECT)}}async buildMessage(t){switch(this.globalSignaturePolicy){case"StrictSign":return await Mf(this.components.peerId,t,this.encodeMessage.bind(this));case"StrictNoSign":return await Promise.resolve({type:"unsigned",...t});default:throw(0,Tt.default)(new Error("Cannot build message: unhandled signature policy"),Et.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(t){if(!this.started)throw(0,Tt.default)(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(t==null)throw(0,Tt.default)(new Error("topic is required"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(t.toString());return r==null?[]:Array.from(r.values())}async publish(t,r){if(!this.started)throw new Error("Pubsub has not started");let n={from:this.components.peerId,topic:t,data:r??new Uint8Array(0),sequenceNumber:kf()};it("publish topic: %s from: %p data: %m",t,n.from,n.data);let i=await this.buildMessage(n),s=!1;this.emitSelf&&this.subscriptions.has(t)&&(s=!0,super.dispatchEvent(new Re("message",{detail:i})));let o=await this.publishMessage(this.components.peerId,i);return s&&(o.recipients=[...o.recipients,this.components.peerId]),o}subscribe(t){if(!this.started)throw new Error("Pubsub has not started");if(it("subscribe to topic: %s",t),!this.subscriptions.has(t)){this.subscriptions.add(t);for(let r of this.peers.keys())this.send(r,{subscriptions:[t],subscribe:!0})}}unsubscribe(t){if(!this.started)throw new Error("Pubsub is not started");super.removeEventListener(t);let r=this.subscriptions.has(t);if(it("unsubscribe from %s - am subscribed %s",t,r),r){this.subscriptions.delete(t);for(let n of this.peers.keys())this.send(n,{subscriptions:[t],subscribe:!1})}}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}getPeers(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.peers.keys())}};var rb=ze("libp2p:floodsub"),ga="/floodsub/1.0.0";var is=class{constructor(t){this.lastPruneTime=0,this.entries=new Map,this.validityMs=t.validityMs}put(t,r){this.entries.set(t,{value:r,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){let t=Date.now();if(!(t-this.lastPruneTime<200)){this.lastPruneTime=t;for(let[r,n]of this.entries.entries())if(n.validUntilMs<t)this.entries.delete(r);else break}}has(t){return this.entries.has(t)}get(t){let r=this.entries.get(t);return r!=null&&r.validUntilMs>=Date.now()?r.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}};var Br;(function(e){let t;(function(i){let s;i.codec=()=>(s==null&&(s=qt((o,a,u={})=>{u.lengthDelimited!==!1&&a.fork(),o.subscribe!=null&&(a.uint32(8),a.bool(o.subscribe)),o.topic!=null&&(a.uint32(18),a.string(o.topic)),u.lengthDelimited!==!1&&a.ldelim()},(o,a)=>{let u={},c=a==null?o.len:o.pos+a;for(;o.pos<c;){let f=o.uint32();switch(f>>>3){case 1:u.subscribe=o.bool();break;case 2:u.topic=o.string();break;default:o.skipType(f&7);break}}return u})),s),i.encode=o=>Vt(o,i.codec()),i.decode=o=>Ot(o,i.codec())})(t=e.SubOpts||(e.SubOpts={}));let r;(function(i){let s;i.codec=()=>(s==null&&(s=qt((o,a,u={})=>{u.lengthDelimited!==!1&&a.fork(),o.from!=null&&(a.uint32(10),a.bytes(o.from)),o.data!=null&&(a.uint32(18),a.bytes(o.data)),o.sequenceNumber!=null&&(a.uint32(26),a.bytes(o.sequenceNumber)),o.topic!=null&&(a.uint32(34),a.string(o.topic)),o.signature!=null&&(a.uint32(42),a.bytes(o.signature)),o.key!=null&&(a.uint32(50),a.bytes(o.key)),u.lengthDelimited!==!1&&a.ldelim()},(o,a)=>{let u={},c=a==null?o.len:o.pos+a;for(;o.pos<c;){let f=o.uint32();switch(f>>>3){case 1:u.from=o.bytes();break;case 2:u.data=o.bytes();break;case 3:u.sequenceNumber=o.bytes();break;case 4:u.topic=o.string();break;case 5:u.signature=o.bytes();break;case 6:u.key=o.bytes();break;default:o.skipType(f&7);break}}return u})),s),i.encode=o=>Vt(o,i.codec()),i.decode=o=>Ot(o,i.codec())})(r=e.Message||(e.Message={}));let n;e.codec=()=>(n==null&&(n=qt((i,s,o={})=>{if(o.lengthDelimited!==!1&&s.fork(),i.subscriptions!=null)for(let a of i.subscriptions)s.uint32(10),e.SubOpts.codec().encode(a,s,{writeDefaults:!0});if(i.messages!=null)for(let a of i.messages)s.uint32(18),e.Message.codec().encode(a,s,{writeDefaults:!0});i.control!=null&&(s.uint32(26),ss.codec().encode(i.control,s,{writeDefaults:!1})),o.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{let o={subscriptions:[],messages:[]},a=s==null?i.len:i.pos+s;for(;i.pos<a;){let u=i.uint32();switch(u>>>3){case 1:o.subscriptions.push(e.SubOpts.codec().decode(i,i.uint32()));break;case 2:o.messages.push(e.Message.codec().decode(i,i.uint32()));break;case 3:o.control=ss.codec().decode(i,i.uint32());break;default:i.skipType(u&7);break}}return o})),n),e.encode=i=>Vt(i,e.codec()),e.decode=i=>Ot(i,e.codec())})(Br||(Br={}));var ss;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.ihave!=null)for(let s of r.ihave)n.uint32(10),os.codec().encode(s,n,{writeDefaults:!0});if(r.iwant!=null)for(let s of r.iwant)n.uint32(18),as.codec().encode(s,n,{writeDefaults:!0});if(r.graft!=null)for(let s of r.graft)n.uint32(26),us.codec().encode(s,n,{writeDefaults:!0});if(r.prune!=null)for(let s of r.prune)n.uint32(34),cs.codec().encode(s,n,{writeDefaults:!0});i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={ihave:[],iwant:[],graft:[],prune:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.ihave.push(os.codec().decode(r,r.uint32()));break;case 2:i.iwant.push(as.codec().decode(r,r.uint32()));break;case 3:i.graft.push(us.codec().decode(r,r.uint32()));break;case 4:i.prune.push(cs.codec().decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(ss||(ss={}));var os;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.topic!=null&&(n.uint32(10),n.string(r.topic)),r.messageIDs!=null)for(let s of r.messageIDs)n.uint32(18),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={messageIDs:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.topic=r.string();break;case 2:i.messageIDs.push(r.bytes());break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(os||(os={}));var as;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.messageIDs!=null)for(let s of r.messageIDs)n.uint32(10),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={messageIDs:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.messageIDs.push(r.bytes());break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(as||(as={}));var us;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.topic!=null&&(n.uint32(10),n.string(r.topic)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.topic=r.string();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(us||(us={}));var cs;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.topic!=null&&(n.uint32(10),n.string(r.topic)),r.peers!=null)for(let s of r.peers)n.uint32(18),fs.codec().encode(s,n,{writeDefaults:!0});r.backoff!=null&&(n.uint32(24),n.uint64(r.backoff)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={peers:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.topic=r.string();break;case 2:i.peers.push(fs.codec().decode(r,r.uint32()));break;case 3:i.backoff=r.uint64();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(cs||(cs={}));var fs;(function(e){let t;e.codec=()=>(t==null&&(t=qt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.peerID!=null&&(n.uint32(10),n.bytes(r.peerID)),r.signedPeerRecord!=null&&(n.uint32(18),n.bytes(r.signedPeerRecord)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.peerID=r.bytes();break;case 2:i.signedPeerRecord=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Vt(r,e.codec()),e.decode=r=>Ot(r,e.codec())})(fs||(fs={}));var ls=ze("libp2p:floodsub");var hs=class extends ns{constructor(t,r){super(t,{...r,canRelayMessage:!0,multicodecs:[ga]}),this.seenCache=new is({validityMs:r?.seenTTL??3e4})}decodeRpc(t){return Br.decode(t)}encodeRpc(t){return Br.encode(t)}decodeMessage(t){return Br.Message.decode(t)}encodeMessage(t){return Br.Message.encode(t)}async processMessage(t,r){let n=await super.getMsgId(r),i=ht(n,"base64");this.seenCache.has(i)||(this.seenCache.put(i,!0),await super.processMessage(t,r))}async publishMessage(t,r){let n=this.getSubscribers(r.topic),i=[];return n==null||n.length===0?(ls("no peers are subscribed to topic %s",r.topic),{recipients:i}):(n.forEach(s=>{if(this.components.peerId.equals(s)){ls("not sending message on topic %s to myself",r.topic);return}if(s.equals(t)){ls("not sending message on topic %s to sender %p",r.topic,s);return}ls("publish msgs on topics %s %p",r.topic,s),i.push(s),this.send(s,{messages:[r]})}),{recipients:i})}};function Rg(e={}){return t=>new hs(t,e)}return Gf(Ng);})();
/*! Bundled license information:

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PFloodsub}));
